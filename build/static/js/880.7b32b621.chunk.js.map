{"version":3,"file":"static/js/880.7b32b621.chunk.js","mappings":"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","sources":["Updating.tsx","pages/CMS/Template/Version.tsx","pages/CMS/Template/Update.tsx"],"sourcesContent":["import { Container, Stack, Typography } from '@mui/material'\nimport { TokenInfo } from 'interfaces'\n\ninterface Props {\n\tuser?: TokenInfo\n}\nexport default function Updating({ user }: Props) {\n\treturn (\n\t\t<Container\n\t\t\tmaxWidth=\"md\"\n\t\t\tsx={{\n\t\t\t\theight: '100%',\n\t\t\t\tpy: 4,\n\t\t\t}}\n\t\t>\n\t\t\t<Stack\n\t\t\t\tsx={{\n\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\tminHeight: '50%',\n\t\t\t\t\tp: 4,\n\t\t\t\t\tbackground: 'url(/editing.svg) #eee8',\n\t\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\t\tbackgroundPosition: 'top right',\n\t\t\t\t\tbackgroundSize: '400px 400px',\n\t\t\t\t}}\n\t\t\t\tgap={2}\n\t\t\t>\n\t\t\t\t<Typography variant=\"h3\" color=\"#cce\" fontWeight={700} sx={{ letterSpacing: '20px' }}>\n\t\t\t\t\tWaiting...\n\t\t\t\t</Typography>\n\t\t\t\t{!!user && (\n\t\t\t\t\t<Typography variant=\"h6\" color=\"#a20\">\n\t\t\t\t\t\t{user.name} - {user.email}\n\t\t\t\t\t</Typography>\n\t\t\t\t)}\n\t\t\t\t<Typography variant=\"h4\" color=\"#f90\">\n\t\t\t\t\t現在編集しています\n\t\t\t\t</Typography>\n\t\t\t</Stack>\n\t\t</Container>\n\t)\n}\n","import ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport { Accordion, AccordionDetails, AccordionSummary, Button, Chip, Stack, Typography } from '@mui/material'\nimport { DataGrid } from '@mui/x-data-grid'\nimport { TemplateApi } from 'API/CMS/template'\nimport { format } from 'date-fns'\nimport { ITemplate } from 'interfaces'\nimport { useParams } from 'react-router-dom'\nimport { useAppDispatch, useAppSelector } from 'redux/hooks'\nimport { UIAction } from 'redux/slices/UI'\n\ninterface Props {\n\tversions: ITemplate[]\n}\nexport default function Version({ versions }: Props) {\n\tconst { id } = useParams<{ id: string }>()\n\tconst tokenInfo = useAppSelector((s) => s.UI.tokenInfo)\n\tconst dispatch = useAppDispatch()\n\tif (!id || !tokenInfo) return null\n\treturn (\n\t\t<Stack gap={2}>\n\t\t\t<Accordion>\n\t\t\t\t<AccordionSummary\n\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tmy: 0,\n\t\t\t\t\t\tminHeight: '0 !important',\n\t\t\t\t\t\tbgcolor: '#acf2',\n\t\t\t\t\t\t'.Mui-expanded': {\n\t\t\t\t\t\t\tmy: '12px',\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Stack direction=\"row\" alignItems=\"center\" gap={1}>\n\t\t\t\t\t\t<Typography fontWeight={600}>最新バージョン {versions.find((f) => f.active)?.ver}</Typography>\n\t\t\t\t\t</Stack>\n\t\t\t\t</AccordionSummary>\n\t\t\t\t<AccordionDetails>\n\t\t\t\t\t<DataGrid\n\t\t\t\t\t\trows={versions}\n\t\t\t\t\t\tcolumns={[\n\t\t\t\t\t\t\t{ field: 'ver', headerName: 'Version', width: 100 },\n\t\t\t\t\t\t\t{ field: 'name', headerName: 'テンプレート名', width: 300 },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: 'updatedAt',\n\t\t\t\t\t\t\t\theaderName: '更新日',\n\t\t\t\t\t\t\t\twidth: 180,\n\t\t\t\t\t\t\t\trenderCell: (v) => {\n\t\t\t\t\t\t\t\t\treturn format(new Date(v.row.updatedAt), 'yyyy年MM月dd日 HH:mm')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: 'createdAt',\n\t\t\t\t\t\t\t\theaderName: '作成日',\n\t\t\t\t\t\t\t\twidth: 180,\n\t\t\t\t\t\t\t\trenderCell: (v) => {\n\t\t\t\t\t\t\t\t\treturn format(new Date(v.row.createdAt), 'yyyy年MM月dd日 HH:mm')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfield: 'active',\n\t\t\t\t\t\t\t\theaderName: '動作',\n\t\t\t\t\t\t\t\trenderCell: (v) => {\n\t\t\t\t\t\t\t\t\treturn !v.row.active ? (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\t\tp: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tpx: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tm: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst confirm = window.confirm('保存してないコンテンツは失われます。変更してもよろしいですか？')\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!confirm) return\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst { error, message } = await TemplateApi.active(v.row.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tUIAction.addGlobalMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: error ? 'error' : 'success',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t有効にする\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Chip label=\"使用中\" size=\"small\" color=\"success\" />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tinitialState={{\n\t\t\t\t\t\t\tpagination: {\n\t\t\t\t\t\t\t\tpaginationModel: { page: 0, pageSize: 30 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tpageSizeOptions={[30, 60]}\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t'& .MuiDataGrid-row': {},\n\t\t\t\t\t\t\t'& .MuiDataGrid-cell:focus': {\n\t\t\t\t\t\t\t\toutline: 'none',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'& .MuiDataGrid-cell:focus-within': {\n\t\t\t\t\t\t\t\toutline: 'none',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'& .MuiDataGrid-columnHeaders': {\n\t\t\t\t\t\t\t\tbgcolor: 'primary.dark',\n\t\t\t\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'& .MuiDataGrid-columnHeaders svg': {\n\t\t\t\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetRowClassName={(v) => {\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdensity=\"compact\"\n\t\t\t\t\t\thideFooterSelectedRowCount\n\t\t\t\t\t\teditMode=\"cell\"\n\t\t\t\t\t\tdisableColumnMenu\n\t\t\t\t\t\tdisableRowSelectionOnClick\n\t\t\t\t\t/>\n\t\t\t\t</AccordionDetails>\n\t\t\t</Accordion>\n\t\t</Stack>\n\t)\n}\n","import { Stack, Typography } from '@mui/material'\nimport { TemplateApi } from 'API/CMS/template'\nimport Updating from 'Updating'\nimport DeleteButton from 'components/Button/Delete'\nimport DesignHTMLSharePoint from 'components/DesignHTMLSharePoint'\nimport EditInput from 'components/EditInput'\nimport { PERMISSION, TokenInfo } from 'interfaces'\nimport { useEffect, useState } from 'react'\nimport { Link, useLocation, useNavigate, useParams } from 'react-router-dom'\nimport { useAppDispatch, useAppSelector } from 'redux/hooks'\nimport { getTemplates } from 'redux/slices/CMS/Template'\nimport { getThemes } from 'redux/slices/CMS/Theme'\nimport { UIAction } from 'redux/slices/UI'\nimport SubOwnerSelect from '../../../components/SubOwnerSelect'\nimport Version from './Version'\n\nexport default function Update() {\n\tconst { id } = useParams<{ id: string }>()\n\tconst nav = useNavigate()\n\tconst location = useLocation()\n\tconst tokenInfo = useAppSelector((s) => s.UI.tokenInfo)\n\tconst dispatch = useAppDispatch()\n\tconst status = useAppSelector((s) => s.CMS.Template.status)\n\tconst templates = useAppSelector((s) => s.CMS.Template.list)\n\tconst template = templates.find((f) => f.id === Number(id))\n\tconst [subOwner, setSubOwner] = useState<number[]>(() => template?.subOwner || [])\n\tconst themeStatus = useAppSelector((s) => s.CMS.Theme.status)\n\tconst themes = useAppSelector((s) => s.CMS.Theme.list)\n\tuseEffect(() => {\n\t\tif (themeStatus === 'init') dispatch(getThemes())\n\t}, [dispatch, themeStatus])\n\tuseEffect(() => {\n\t\tif (status === 'init') dispatch(getTemplates())\n\t\telse if (id && !template) nav('/cms/template')\n\t}, [dispatch, id, nav, status, template])\n\tconst [updating, setUpdating] = useState<TokenInfo>()\n\tconst [loading, setLoading] = useState(false)\n\tconst currentPath = useAppSelector((s) => s.UI.currentPath)\n\tuseEffect(() => {\n\t\tconst currentEditor = currentPath.find((f) => f.path === location.pathname)\n\t\tif (currentEditor && currentEditor.wsId !== (window as any).wss.id) {\n\t\t\tsetUpdating(currentEditor.auth)\n\t\t} else {\n\t\t\tsetUpdating(undefined)\n\t\t}\n\t}, [currentPath, location.pathname])\n\tif (updating) return <Updating user={updating} />\n\n\tif (!id || !template || !tokenInfo) return null\n\tconst theme = themes.find((f) => f.id === template.themeId)\n\tif (!theme) return null\n\treturn (\n\t\t<Stack gap={1}>\n\t\t\t<Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" gap={2} sx={{}}>\n\t\t\t\t<Typography\n\t\t\t\t\tcolor=\"primary.dark\"\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tテンプレート設定\n\t\t\t\t</Typography>\n\t\t\t\t<Link to={`/cms/template/${id}/delete`} state={{ location }}>\n\t\t\t\t\t<DeleteButton text=\"削除\" sx={{ width: 150, py: '2px', fontSize: 14 }} />\n\t\t\t\t</Link>\n\t\t\t</Stack>\n\n\t\t\t<Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" gap={2}>\n\t\t\t\t<EditInput\n\t\t\t\t\tlabel=\"テンプレート名\"\n\t\t\t\t\tvalue={template.name}\n\t\t\t\t\tapiEndpoint={'/api/cms/template/' + id}\n\t\t\t\t\tfieldName=\"name\"\n\t\t\t\t\treadOnly={tokenInfo.permissions[PERMISSION.CMS] < 2}\n\t\t\t\t/>\n\t\t\t</Stack>\n\t\t\t<Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" gap={2}>\n\t\t\t\t{[2, 3, 6, 7].includes(tokenInfo.permissions[PERMISSION.CMS]) && (\n\t\t\t\t\t<SubOwnerSelect\n\t\t\t\t\t\tvalue={subOwner}\n\t\t\t\t\t\tsetValue={async (val) => {\n\t\t\t\t\t\t\tsetSubOwner(val)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Stack>\n\t\t\t<Stack alignItems=\"stretch\" gap={1}>\n\t\t\t\t<Stack\n\t\t\t\t\tflex={1}\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\tposition=\"relative\"\n\t\t\t\t\tzIndex={99}\n\t\t\t\t\tbgcolor=\"#3ac2\"\n\t\t\t\t\tp={0.5}\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tborder: '1px solid #ccc',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DesignHTMLSharePoint\n\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\tstyle={template.style}\n\t\t\t\t\t\tscript={template.script}\n\t\t\t\t\t\tformStyle={template.formStyle}\n\t\t\t\t\t\tformScript={template.formScript}\n\t\t\t\t\t\tbodyCode={template.body}\n\t\t\t\t\t\thandleSavePage={async (body, style, script, formStyle, formScript) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tsetLoading(true)\n\t\t\t\t\t\t\t\tconst { error, message } = await TemplateApi.update({\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tbody,\n\t\t\t\t\t\t\t\t\tsubOwner,\n\t\t\t\t\t\t\t\t\tstyle,\n\t\t\t\t\t\t\t\t\tscript,\n\t\t\t\t\t\t\t\t\tformScript,\n\t\t\t\t\t\t\t\t\tformStyle,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\tUIAction.addGlobalMessage({\n\t\t\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\t\t\ttype: error ? 'error' : 'success',\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t/>\n\t\t\t\t</Stack>\n\t\t\t</Stack>\n\t\t\t<Version versions={templates.filter((f) => f.uuid === template.uuid)} />\n\t\t</Stack>\n\t)\n}\n"],"names":["Updating","_ref","user","_jsx","Container","maxWidth","sx","height","py","children","_jsxs","Stack","justifyContent","minHeight","p","background","backgroundRepeat","backgroundPosition","backgroundSize","gap","Typography","variant","color","fontWeight","letterSpacing","name","email","Version","_versions$find","versions","id","useParams","tokenInfo","useAppSelector","s","UI","dispatch","useAppDispatch","Accordion","AccordionSummary","expandIcon","ExpandMoreIcon","my","bgcolor","direction","alignItems","find","f","active","ver","AccordionDetails","DataGrid","rows","columns","field","headerName","width","renderCell","v","format","Date","row","updatedAt","createdAt","Chip","label","size","Button","px","m","minWidth","onClick","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$TemplateApi$ac","error","message","wrap","_context","prev","next","window","confirm","abrupt","TemplateApi","sent","UIAction","addGlobalMessage","type","finish","stop","initialState","pagination","paginationModel","page","pageSize","pageSizeOptions","outline","getRowClassName","density","hideFooterSelectedRowCount","editMode","disableColumnMenu","disableRowSelectionOnClick","Update","nav","useNavigate","location","useLocation","status","CMS","Template","templates","list","template","Number","_useState","useState","subOwner","_useState2","_slicedToArray","setSubOwner","themeStatus","Theme","themes","useEffect","getThemes","getTemplates","_useState3","_useState4","updating","setUpdating","_useState5","_useState6","loading","setLoading","currentPath","currentEditor","path","pathname","wsId","wss","auth","undefined","theme","themeId","Link","to","concat","state","DeleteButton","text","fontSize","EditInput","value","apiEndpoint","fieldName","readOnly","permissions","PERMISSION","includes","SubOwnerSelect","setValue","val","_x","apply","arguments","flex","position","zIndex","border","DesignHTMLSharePoint","style","script","formStyle","formScript","bodyCode","body","handleSavePage","_ref2","_callee2","_yield$TemplateApi$up","_context2","update","_x2","_x3","_x4","_x5","_x6","filter","uuid"],"sourceRoot":""}