"use strict";(self.webpackChunkcaa_client=self.webpackChunkcaa_client||[]).push([[1862],{78999:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(1413),a=n(93433),i=n(74165),o=n(15861),l=n(29439),c=n(44695),s=n(53329),u=n(83449),d=n(47283),p=n(82851),f=n(39709),m=n(53767),v=n(20890),Z=n(68870),h=n(43896),b=n(68096),g=n(30829),x=n(64415),y=n(23786),C=n(5712),j=n(27391),I=n(80950),w=n(72791),M=n(61134),P=n(57689),S=n(48367),T=n(49822),O=n(86081),k=n(94604),V=n(81724),R=n(80184);function L(){var e=(0,P.UO)().webId,t=(0,S.TL)(),n=(0,P.s0)(),L=(0,w.useState)(!1),z=(0,l.Z)(L,2),G=z[0],N=z[1],q=(0,S.CG)((function(e){return e.CMS.Page.status}));(0,w.useEffect)((function(){"init"===q&&t((0,T.UQ)())}),[q,t]);var F=(0,S.CG)((function(e){return e.CMS.Template.status}));(0,w.useEffect)((function(){"init"===F&&t((0,O.uR)())}),[t,F]);var E=(0,w.useState)(0),_=(0,l.Z)(E,2),B=_[0],U=_[1],H=(0,w.useState)("template"),W=(0,l.Z)(H,2),Q=W[0],D=W[1],A=(0,S.CG)((function(e){return e.CMS.Page.list})).filter((function(t){return e&&t.webId===parseInt(e)&&t.active})),K=(0,S.CG)((function(e){return e.CMS.Template.list})).filter((function(e){return e.active}));(0,w.useEffect)((function(){A.find((function(e){return e.id===B}))&&n("/cms/".concat(e,"/page/").concat(B))}),[B,A,n,e]);var X=V.Ry({url:V.Z_().required().matches(/^\/[a-z0-9-_/.]+html$(?!\/)/gm),title:V.Z_().required(),webId:V.Rx().required().min(1),themeId:V.Rx().required().min(1)}),$=(0,M.cI)({resolver:(0,c.X)(X),defaultValues:{url:"",webId:e?parseInt(e):0,themeId:0,title:"",body:{},description:"",style:"",script:""}}),J=$.register,Y=$.handleSubmit,ee=$.setValue,te=$.formState.errors,ne=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r,a,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,I.S.create(n);case 4:r=e.sent,a=r.id,o=r.message,l=r.error,t(k.T9.addGlobalMessage({type:l?"error":"success",message:o})),a&&U(a);case 10:return e.prev=10,N(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,,10,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)(m.Z,{gap:1,component:"form",noValidate:!0,autoComplete:"off",onSubmit:Y(ne),children:[(0,R.jsx)(m.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,R.jsx)(v.Z,{color:"primary.dark",sx:{fontWeight:600},children:"\u30a6\u30a7\u30d6\u30da\u30fc\u30b8\u4f5c\u6210"})}),(0,R.jsxs)(m.Z,{gap:2,maxWidth:"sm",my:2,children:[(0,R.jsxs)(u.ZP,{value:Q,children:[(0,R.jsx)(Z.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,R.jsxs)(d.Z,{value:Q,onChange:function(e,t){ee("themeId",0),D("".concat(t))},children:[(0,R.jsx)(h.Z,{label:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u9078\u629e",value:"template"}),(0,R.jsx)(h.Z,{label:"\u30da\u30fc\u30b8\u8907\u88fd",value:"page"})]})}),(0,R.jsx)(p.Z,{value:"template",sx:{p:0},children:(0,R.jsxs)(b.Z,{fullWidth:!0,size:"small",children:[(0,R.jsx)(g.Z,{id:"\u30da\u30fc\u30b8\u8907\u88fd",children:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u9078\u629e"}),(0,R.jsxs)(x.Z,{size:"small",labelId:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u9078\u629e",label:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u9078\u629e",defaultValue:0,error:"themeId"in te,onChange:function(e){var t=e.target.value,n=K.find((function(e){return e.id===t}));n&&(ee("themeId",n.themeId,{shouldValidate:!0}),ee("body",n.body),ee("script",n.script),ee("style",n.style))},children:[(0,R.jsx)(y.Z,{disabled:!0,value:0,children:(0,R.jsx)(v.Z,{component:"em",variant:"caption",children:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})}),K.map((function(e){return(0,R.jsx)(y.Z,{value:e.id,children:e.name},e.id)}))]})]})}),(0,R.jsx)(p.Z,{value:"page",sx:{p:0},children:(0,R.jsx)(C.Z,{disablePortal:!0,options:[0].concat((0,a.Z)(A.map((function(e){return e.id})))),fullWidth:!0,getOptionLabel:function(e){var t;return 0===e?"":(null===(t=A.find((function(t){return t.id===e})))||void 0===t?void 0:t.title)||""},getOptionDisabled:function(e){return 0===e},defaultValue:0,renderInput:function(e){return(0,R.jsx)(j.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"\u30da\u30fc\u30b8\u8907\u88fd",placeholder:"\u30da\u30fc\u30b8\u540d\u3092\u5165\u529b\u3059\u308b\u3068\u9805\u76ee\u306e\u7d5e\u8fbc\u307f\u304c\u3067\u304d\u307e\u3059",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",error:"themeId"in te}))},onChange:function(e,t){if(t){var n=A.find((function(e){return e.id===t}));n&&(ee("themeId",n.themeId,{shouldValidate:!0}),ee("body",n.body),ee("script",n.script),ee("style",n.style))}}})})]}),(0,R.jsx)(j.Z,(0,r.Z)((0,r.Z)({variant:"outlined",size:"small",margin:"dense",autoFocus:!0,required:!0,label:"\u30da\u30fc\u30b8URL",placeholder:"\u4f8b\uff1a/index.html, /about.html, /news/2022-01-01.html"},J("url")),{},{error:"url"in te})),(0,R.jsx)(j.Z,(0,r.Z)((0,r.Z)({variant:"outlined",size:"small",margin:"dense",required:!0,label:"\u30bf\u30a4\u30c8\u30eb",placeholder:"\u4f8b\uff1a\u30db\u30fc\u30e0"},J("title")),{},{error:"title"in te})),(0,R.jsx)(j.Z,(0,r.Z)((0,r.Z)({variant:"outlined",size:"small",multiline:!0,minRows:3,margin:"dense",label:"\u30da\u30fc\u30b8\u8aac\u660e",placeholder:"\u5165\u529b"},J("description")),{},{error:"description"in te}))]}),(0,R.jsx)(Z.Z,{children:(0,R.jsx)(f.Z,{variant:"outlined",disabled:Object.keys(te).length>0,loading:G,loadingPosition:"start",startIcon:(0,R.jsx)(s.Z,{}),type:"submit",children:"\u4f5c\u6210\u3059\u308b"})})]})}},53329:function(e,t,n){var r=n(64836);t.Z=void 0;var a=r(n(45649)),i=n(80184),o=(0,a.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=o},83449:function(e,t,n){n.d(t,{ZP:function(){return l},_i:function(){return c},pQ:function(){return u},uU:function(){return s}});var r=n(29439),a=n(72791),i=n(80184),o=a.createContext(null);function l(e){var t=e.children,n=e.value,l=function(){var e=a.useState(null),t=(0,r.Z)(e,2),n=t[0],i=t[1];return a.useEffect((function(){i("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),n}(),c=a.useMemo((function(){return{idPrefix:l,value:n}}),[l,n]);return(0,i.jsx)(o.Provider,{value:c,children:t})}function c(){return a.useContext(o)}function s(e,t){return null===e.idPrefix?null:"".concat(e.idPrefix,"-P-").concat(t)}function u(e,t){return null===e.idPrefix?null:"".concat(e.idPrefix,"-T-").concat(t)}},47283:function(e,t,n){var r=n(87462),a=n(63366),i=n(72791),o=n(2101),l=n(83449),c=n(80184),s=["children"],u=i.forwardRef((function(e,t){var n=e.children,u=(0,a.Z)(e,s),d=(0,l._i)();if(null===d)throw new TypeError("No TabContext provided");var p=i.Children.map(n,(function(e){return i.isValidElement(e)?i.cloneElement(e,{"aria-controls":(0,l.uU)(d,e.props.value),id:(0,l.pQ)(d,e.props.value)}):null}));return(0,c.jsx)(o.Z,(0,r.Z)({},u,{ref:t,value:d.value,children:p}))}));t.Z=u},82851:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(87462),a=n(63366),i=n(72791),o=n(28182),l=n(66934),c=n(31402),s=n(94419),u=n(21217);function d(e){return(0,u.Z)("MuiTabPanel",e)}(0,n(75878).Z)("MuiTabPanel",["root"]);var p=n(83449),f=n(80184),m=["children","className","value"],v=(0,l.ZP)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){return{padding:e.theme.spacing(3)}})),Z=i.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiTabPanel"}),i=n.children,l=n.className,u=n.value,Z=(0,a.Z)(n,m),h=(0,r.Z)({},n),b=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},d,t)}(h),g=(0,p._i)();if(null===g)throw new TypeError("No TabContext provided");var x=(0,p.uU)(g,u),y=(0,p.pQ)(g,u);return(0,f.jsx)(v,(0,r.Z)({"aria-labelledby":y,className:(0,o.Z)(b.root,l),hidden:u!==g.value,id:x,ref:t,role:"tabpanel",ownerState:h},Z,{children:u===g.value&&i}))}))},96014:function(e,t,n){n.d(t,{f:function(){return i}});var r=n(75878),a=n(21217);function i(e){return(0,a.Z)("MuiListItemIcon",e)}var o=(0,r.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=o},29849:function(e,t,n){n.d(t,{L:function(){return i}});var r=n(75878),a=n(21217);function i(e){return(0,a.Z)("MuiListItemText",e)}var o=(0,r.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=o},23786:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(4942),a=n(63366),i=n(87462),o=n(72791),l=n(28182),c=n(94419),s=n(12065),u=n(66934),d=n(31402),p=n(66199),f=n(95080),m=n(40162),v=n(42071),Z=n(90133),h=n(96014),b=n(29849),g=n(75878),x=n(21217);function y(e){return(0,x.Z)("MuiMenuItem",e)}var C=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),j=n(80184),I=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],w=(0,u.ZP)(f.Z,{shouldForwardProp:function(e){return(0,u.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,a=e.ownerState;return(0,i.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,r.Z)(t,"&.".concat(C.selected),(0,r.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(C.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,r.Z)(t,"&.".concat(C.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,s.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,r.Z)(t,"&.".concat(C.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,r.Z)(t,"&.".concat(C.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,r.Z)(t,"& + .".concat(Z.Z.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,r.Z)(t,"& + .".concat(Z.Z.inset),{marginLeft:52}),(0,r.Z)(t,"& .".concat(b.Z.root),{marginTop:0,marginBottom:0}),(0,r.Z)(t,"& .".concat(b.Z.inset),{paddingLeft:36}),(0,r.Z)(t,"& .".concat(h.Z.root),{minWidth:36}),t),!a.dense&&(0,r.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),a.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,r.Z)({},"& .".concat(h.Z.root," svg"),{fontSize:"1.25rem"})))})),M=o.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiMenuItem"}),r=n.autoFocus,s=void 0!==r&&r,u=n.component,f=void 0===u?"li":u,Z=n.dense,h=void 0!==Z&&Z,b=n.divider,g=void 0!==b&&b,x=n.disableGutters,C=void 0!==x&&x,M=n.focusVisibleClassName,P=n.role,S=void 0===P?"menuitem":P,T=n.tabIndex,O=n.className,k=(0,a.Z)(n,I),V=o.useContext(p.Z),R=o.useMemo((function(){return{dense:h||V.dense||!1,disableGutters:C}}),[V.dense,h,C]),L=o.useRef(null);(0,m.Z)((function(){s&&L.current&&L.current.focus()}),[s]);var z,G=(0,i.Z)({},n,{dense:R.dense,divider:g,disableGutters:C}),N=function(e){var t=e.disabled,n=e.dense,r=e.divider,a=e.disableGutters,o=e.selected,l=e.classes,s={root:["root",n&&"dense",t&&"disabled",!a&&"gutters",r&&"divider",o&&"selected"]},u=(0,c.Z)(s,y,l);return(0,i.Z)({},l,u)}(n),q=(0,v.Z)(L,t);return n.disabled||(z=void 0!==T?T:-1),(0,j.jsx)(p.Z.Provider,{value:R,children:(0,j.jsx)(w,(0,i.Z)({ref:q,role:S,tabIndex:z,component:f,focusVisibleClassName:(0,l.Z)(N.focusVisible,M),className:(0,l.Z)(N.root,O)},k,{ownerState:G,classes:N}))})}))},7883:function(e,t,n){n(72791);var r=n(76189),a=n(80184);t.Z=(0,r.Z)((0,a.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},11883:function(e,t,n){n(72791);var r=n(76189),a=n(80184);t.Z=(0,r.Z)((0,a.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")}}]);
//# sourceMappingURL=1862.6e4735b9.chunk.js.map