"use strict";(self.webpackChunkcaa_client=self.webpackChunkcaa_client||[]).push([[1267],{43859:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),i=t(36459),a=t(36151),l=t(78820),o=t(80184);function s(e){var n=Object.assign({},((0,i.Z)(e),e));return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({size:"small",color:"error",variant:"outlined"},n),{},{sx:(0,r.Z)({mx:.5,px:.5,py:.2,minWidth:0,fontSize:10},n.sx),children:[(0,o.jsx)(l.ql3,{style:{fontSize:20}}),n.text]}))}},61059:function(e,n,t){t.d(n,{Z:function(){return V}});var r=t(1413),i=t(74165),a=t(4942),l=t(15861),o=t(29439),s=t(44695),c=t(39709),d=t(68870),u=t(53767),x=t(27391),h=t(63466),m=t(36151),p=t(20890),f=t(66888),j=t(16386),g=t(72791),Z=t(61134),v=t(78820),b=t(20458),y=t(48367),w=t(94604),C=t(60251),k=t(81724),I=t(80184);function V(e){var n,t=e.apiEndpoint,V=e.fieldName,S=(e.max,e.min,e.multiline),F=e.rows,M=e.label,z=e.subText,T=e.value,E=void 0===T?"":T,q=e.required,L=void 0!==q&&q,W=e.datePicker,R=e.readOnly,N=e.useGroupName,P=e.group,D=e.render,A=k.Ry({}),H=(0,y.TL)(),O=(0,g.useState)(!1),G=(0,o.Z)(O,2),B=G[0],_=G[1],$=(0,g.useState)(!1),U=(0,o.Z)($,2),X=U[0],K=U[1],Q=(0,g.useRef)(null),J=(0,Z.cI)({resolver:(0,s.X)(A),defaultValues:{value:W?E?new Date(E):null:N&&"string"===typeof E?E.replace("[".concat(null===P||void 0===P?void 0:P.name,"]"),""):E}}),Y=J.register,ee=J.handleSubmit,ne=J.formState.errors,te=J.setValue,re=J.getValues,ie=J.setError,ae=J.reset;(0,g.useEffect)((function(){if(E){var e=N&&"string"===typeof E?E.replace("[".concat(null===P||void 0===P?void 0:P.name,"]"),""):E;te("value",e,{shouldValidate:!0})}}),[E]),(0,g.useEffect)((function(){var e,n,t,r;Q.current&&(X?(null===(e=Q.current.querySelector("input"))||void 0===e||e.focus(),null===(n=Q.current.querySelector("input"))||void 0===n||n.focus()):(null===(t=Q.current.querySelector("input"))||void 0===t||t.blur(),null===(r=Q.current.querySelector("input"))||void 0===r||r.blur()))}),[X]);var le=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var r,l,o,s,c,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.value,!t||!V){e.next=17;break}return _(!0),e.prev=3,e.next=6,C.Z.put(t,(0,a.Z)({},V,N&&"string"===typeof r?"[".concat(null===P||void 0===P?void 0:P.name,"]").concat(r):r));case 6:l=e.sent,o=l.data,s=o.message,c=void 0===s?"":s,d=o.error,K(!1),H(w.T9.addGlobalMessage({message:c,type:d?"error":"success"})),ae();case 14:return e.prev=14,_(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,,14,17]])})));return function(n){return e.apply(this,arguments)}}();return(0,I.jsx)(d.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:ee(le),my:1,children:X?(0,I.jsxs)(u.Z,{direction:{md:"row",xs:"column"},alignItems:"center",sx:{display:X?"flex":"none",maxWidth:{md:500,xs:300}},ref:Q,children:[W?(0,I.jsx)(f.M,{label:M,inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:re("value")||null,onChange:function(e){e&&e instanceof Date&&!isNaN(e.valueOf())&&te("value",e,{shouldValidate:!0})},onError:function(e){ie("value",{message:null===e||void 0===e?void 0:e.toString()})},renderInput:function(e){return(0,I.jsx)(x.Z,(0,r.Z)((0,r.Z)({required:L},e),{},{size:"small"}))}}):(0,I.jsx)(x.Z,(0,r.Z)((0,r.Z)({variant:S?"outlined":"standard",required:L,margin:"none",size:"small",fullWidth:!0,label:M,multiline:S,rows:F,onKeyDown:function(e){"Escape"===e.key&&(K(!1),te("value",E,{shouldValidate:!0}))},InputProps:N?{startAdornment:(0,I.jsxs)(h.Z,{position:"start",children:["[",null===P||void 0===P?void 0:P.name,"]"]})}:void 0},Y("value")),{},{error:"name"in ne,helperText:null===(n=ne.value)||void 0===n?void 0:n.message})),(0,I.jsxs)(u.Z,{direction:"row",sx:{my:1},children:[(0,I.jsx)(m.Z,{sx:{mx:.5,px:.5,minWidth:0},size:"small",color:"error",variant:"outlined",onClick:function(){K(!1),te("value",E,{shouldValidate:!0})},children:(0,I.jsx)(v.SV5,{className:"text-lg"})}),(0,I.jsx)(c.Z,{disabled:Object.keys(ne).length>0,loading:B,sx:{mx:.5,px:.5,minWidth:0},size:"small",variant:"outlined",type:"submit",children:(0,I.jsx)(v.JMf,{className:"text-lg"})})]})]}):(0,I.jsxs)(u.Z,{direction:{md:"row",xs:"column"},spacing:2,sx:{display:X?"none":"flex"},alignItems:{md:"center",xs:"flex-start"},children:[(0,I.jsx)(p.Z,{fontWeight:"bold",variant:"body2",flex:"none",children:M}),(0,I.jsxs)(u.Z,{direction:"row",alignItems:"center",children:[D?D():W||"string"!==typeof E?(0,I.jsx)(p.Z,{children:E?"string"!==typeof E?(0,j.Z)(E,"yyyy\u5e74MM\u6708dd\u65e5"):(0,j.Z)(new Date(E),"yyyy\u5e74MM\u6708dd\u65e5"):"--"}):(0,I.jsx)(p.Z,{sx:{color:Boolean(E.trim())?"":"#aaa"},children:E.trim()||"\u672a\u8a2d\u5b9a"}),(0,I.jsx)(p.Z,{mx:1,children:z}),!R&&(0,I.jsx)(m.Z,{sx:{flex:"none",mx:1,p:.2,minWidth:0},size:"small",variant:"outlined",color:"info",onClick:function(){K(!0)},children:(0,I.jsx)(b.FNg,{className:"text-lg"})})]})]})})}},11267:function(e,n,t){t.r(n),t.d(n,{default:function(){return Te}});var r=t(74165),i=t(15861),a=t(29439),l=t(53767),o=t(20890),s=t(51266),c=t(43859),d=t(93433),u=t(4942),x=t(1413),h=t(45987),m=t(44695),p=t(42419),f=t(53329),j=t(39709),g=t(83449),Z=t(47283),v=t(82851),b=t(66934),y=t(97639),w=t(69293),C=t(68870),k=t(43896),I=t(36151),V=t(27391),S=t(85523),F=t(89891),M=t(17133),z=t(88970),T=t(61419),E=t(13400),q=t(94454),L=t(49484),W=t(48980),R=t(35527),N=t(76933),P=t(23786),D=t(57064),A=t(49900),H=t(66888),O=t(16386),G=t(72791),B=t(61134),_=t(78820),$=t(7692),U=t(39126),X=t(20458),K=t(16856),Q=t(60978),J=t(41578),Y=t(93859),ee=t(81724),ne=t(12065),te=t(14409),re=t(85990),ie=t.n(re),ae=t(80184),le=function(e,n,t){var r=Array.from(e),i=r.splice(n,1),l=(0,a.Z)(i,1)[0];return r.splice(t,0,l),r};function oe(e){var n=e.selectItem,t=e.form,r=e.editMode,i=e.remove,a=e.edit,o=e.setFormContent,s=(0,G.useCallback)((function(e){var n=e.format,t=e.display,r=e.maxlength,i=e.minlength,a=e.multiSelect,l=e.options,o=e.required,s=e.textType,c=e.placeholder,d=e.rows,u=e.useTime,x=e.name,h=e.branch,m=(0,ae.jsx)(ae.Fragment,{}),p=function(e){var n=e.useFor;return void 0===n||n?(0,ae.jsx)(ae.Fragment,{children:(0,ae.jsxs)("label",{htmlFor:x,style:{display:"flex",alignItems:"center"},children:[t,o?(0,ae.jsx)("span",{style:{fontWeight:400,color:"#EC0000",marginLeft:4,fontSize:14},children:"\u5fc5\u9808"}):null]})}):(0,ae.jsxs)("label",{style:{display:"flex",alignItems:"center"},children:[t,o?(0,ae.jsx)("span",{style:{fontWeight:400,color:"#EC0000",marginLeft:4,fontSize:14},children:"\u5fc5\u9808"}):null]})};switch(n){case"\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09":m=(0,ae.jsx)(p,{useFor:!1});break;case"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{}),(0,ae.jsx)("input",{type:"email",placeholder:c,style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor"},name:x,id:x,minLength:parseInt("".concat(i))||void 0,maxLength:parseInt("".concat(r))||void 0})]});break;case"\u77ed\u6587":var f=void 0;"en"===s?f="[A-z\\s]{".concat(i||0,",").concat(r||"","}"):"num"===s?f="[0-9\\s]{".concat(i||0,",").concat(r||"","}"):"en-num"===s?f="[A-z0-9\\s]{".concat(i||0,",").concat(r||"","}"):"en-num-sym"===s?f="[A-Za-z0-9\\p{P}\\p{S}\\s]{".concat(i||0,",").concat(r||"","}"):"ja"===s&&(f="[\u4e00-\u9faf\u3041-\u3094\u309e\u309b\u309c\u30fc\u30a1-\u30fb\u30fd\u30fe\u309b\u309c\u30fc\uff10-\uff19\u3000]{".concat(i||0,",").concat(r||"","}")),m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{}),(0,ae.jsx)("input",{type:"text",placeholder:c,style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor"},name:x,id:x,minLength:parseInt("".concat(i))||void 0,maxLength:parseInt("".concat(r))||void 0,pattern:f})]});break;case"\u9577\u6587":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{}),(0,ae.jsx)("textarea",{placeholder:c,style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor",resize:d?"none":"vertical"},name:x,id:x,rows:parseInt("".concat(d))||4,minLength:parseInt("".concat(i))||void 0,maxLength:parseInt("".concat(r))||void 0})]});break;case"\u65e5\u4ed8":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{useFor:!1}),(0,ae.jsx)("input",{type:u?"datetime-local":"date",style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor"},name:x,id:x,min:i,max:r})]});break;case"\u9078\u629e\u80a2":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{useFor:!1}),(0,ae.jsx)("div",{style:{display:"flex",flexDirection:"column",padding:"10px 0"},children:l.map((function(e){return(0,ae.jsxs)("div",{style:{display:"flex",padding:"2px 10px",gap:"4px",margin:"2px 0",borderLeft:h?"10px solid ".concat((0,ne.Fq)(se(e.id),.9)):"none"},children:[(0,ae.jsx)("input",{type:a?"checkbox":"radio",name:x,id:e.id}),(0,ae.jsx)("label",{htmlFor:e.id,style:{fontWeight:400},children:e.text})]},e.id)}))})]});break;case"\u4e00\u89a7":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{useFor:!1}),(0,ae.jsxs)("select",{name:x,id:x,style:{width:"100%",height:42,padding:"4px 10px",borderRadius:4,border:"1px solid currentColor"},children:[(0,ae.jsx)("option",{value:"",children:"--"}),l.map((function(e){return(0,ae.jsx)("option",{value:e.text,children:e.text},e.id)}))]})]})}return(0,ae.jsx)("div",{"data-name":x,"data-required":o?"true":void 0,"data-maxlength":r,children:m})}),[]),c=(0,G.useMemo)((function(){return t.map((function(e){var t=s(e),o=[];return e.branch&&e.branchItems&&e.branchItems.length>0&&e.branchItems.forEach((function(e){var n=e.list,t=e.option;n.forEach((function(e){o.push((0,ae.jsx)("div",{style:{padding:"4px 10px",background:(0,ne.Fq)(se(t),.3)},children:s(e)}))}))})),(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"flex-start",gap:2,sx:r?{px:2,py:1,"&:hover":{bgcolor:"#eee"},cursor:"grab","label,input,textarea,select":{pointerEvents:"none"},outline:n===e.name?"3px dashed #a0c":"none"}:{},children:[(0,ae.jsxs)(C.Z,{flex:1,children:[t,o.map((function(e,n){return(0,ae.jsx)(G.Fragment,{children:e},n)}))]}),r&&(0,ae.jsxs)(l.Z,{direction:"row",gap:1,alignItems:"center",height:66,children:[(0,ae.jsx)(I.Z,{color:"info",sx:{p:.5,minWidth:0,fontSize:24,border:"1px solid currentColor",borderRadius:"4px"},onClick:function(){a&&a(e)},children:(0,ae.jsx)(_.QML,{})}),(0,ae.jsx)(I.Z,{color:"error",sx:{p:.5,minWidth:0,fontSize:24,border:"1px solid currentColor",borderRadius:"4px"},onClick:function(){i&&i(e.name)},children:(0,ae.jsx)(K.SaI,{})})]})]},e.name)}))}),[t,s,n,r,a,i]);return r?(0,ae.jsx)(te.Z5,{onDragEnd:function(e){var r=e.destination,i=e.source;r&&o&&!n&&o(le(t,i.index,r.index))},children:(0,ae.jsx)(te.bK,{droppableId:"droppable",children:function(e){return(0,ae.jsx)(C.Z,(0,x.Z)((0,x.Z)({ref:e.innerRef},e.droppableProps),{},{children:c.map((function(e,t){return(0,ae.jsx)(te._l,{index:t,draggableId:"".concat(t),children:function(t,r){return(0,ae.jsxs)(C.Z,(0,x.Z)((0,x.Z)((0,x.Z)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{sx:{borderColor:function(e){return(0,ne.Fq)(e.palette.primary.light,.6)},background:r.isDragging?"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)":void 0,boxShadow:r.isDragging?"0 3px 5px 2px rgba(255, 105, 135, .3)":void 0,pointerEvents:n?"none":"auto"},children:[e,t.placeholder]}))}},t)}))}))}})}):(0,ae.jsx)(G.Fragment,{children:c})}function se(e){return ie()("".concat(e))}var ce=["className"],de=(0,b.ZP)((function(e){var n=e.className,t=(0,h.Z)(e,ce);return(0,ae.jsx)(y.Z,(0,x.Z)((0,x.Z)({},t),{},{classes:{popper:n}}))}))((function(e){e.theme;return(0,u.Z)({},"& .".concat(w.Z.tooltip),{backgroundColor:"transparent",color:"rgba(0, 0, 0, 0.87)",maxWidth:"none"})}));function ue(e){var n=e.branchItems,t=void 0===n?[]:n,s=e.setBranchItems,c=ee.Ry({display:ee.Z_().when("format",{is:function(e){return"action"!==e},then:ee.Z_().required()})}),u=(0,B.cI)({resolver:(0,m.X)(c),defaultValues:{minlength:"",rows:"",options:[]}}),h=u.register,f=u.handleSubmit,g=u.setValue,Z=u.getValues,v=u.reset,b=u.watch,y=u.formState.errors;(0,G.useEffect)((function(){var e=b((function(e,n){n.name,n.type;e.format&&setTimeout((function(){var e;null===(e=document.getElementById("setting-form-child-item"))||void 0===e||e.scrollIntoView({block:"center",behavior:"smooth"})}),100)}));return function(){return e.unsubscribe()}}),[b]);var w=(0,G.useState)(!1),C=(0,a.Z)(w,2),k=C[0],ne=C[1],te=(0,G.useState)(),re=(0,a.Z)(te,2),ie=re[0],le=re[1],se=(0,G.useState)(""),ce=(0,a.Z)(se,2),ue=ce[0],xe=ce[1],he=(0,G.useCallback)((function(){v(),le(void 0),xe("")}),[]),me=(0,G.useMemo)((function(){return(0,ae.jsx)(oe,{form:t,editMode:!0,selectItem:ue,setFormContent:function(e){s(e)},remove:function(e){s(t.filter((function(n){return n.name!==e})))},edit:function(e){xe(e.name),g("display",e.display),g("format",e.format),g("maxlength",e.maxlength),g("minlength",e.minlength),g("multiSelect",e.multiSelect),g("options",e.options),g("placeholder",e.placeholder),g("required",e.required),g("rows",e.rows),g("textType",e.textType),g("useTime",e.useTime)}})}),[t,ue]),pe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue?(i=Array.from(t),(a=i.findIndex((function(e){return e.name===ue})))>=0&&(i.splice(a,1,(0,x.Z)((0,x.Z)({},n),{},{name:ue})),s(i))):s([].concat((0,d.Z)(t),[(0,x.Z)((0,x.Z)({},n),{},{name:"item"+(0,Y.qR)()})])),he();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fe=Z(),je=fe.format,ge=fe.maxlength,Ze=fe.minlength,ve=fe.multiSelect,be=fe.options,ye=fe.required,we=fe.textType,Ce=fe.rows,ke=fe.useTime;return(0,ae.jsxs)(l.Z,{children:[(0,ae.jsx)(l.Z,{sx:{my:2,width:"100%",display:"flex",flexDirection:"column",px:1},children:me}),(0,ae.jsxs)(l.Z,{width:"100%",justifyContent:"center",p:.5,sx:{minHeight:100},children:[je&&(0,ae.jsxs)(l.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:f(pe),sx:{border:"1px solid #ccc",p:2,bgcolor:"#eee"},gap:2,id:"setting-form-child-item",children:[(0,ae.jsxs)(l.Z,{gap:1,children:[(0,ae.jsx)(o.Z,{children:je}),["\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09"].includes(je)&&(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({variant:"outlined",required:!0,margin:"dense",autoFocus:!0,multiline:!0,minRows:3,fullWidth:!0,size:"small",label:"\u4ed5\u51fa\u3057"},h("display")),{},{error:"display"in y})),["\u4e00\u89a7","\u9078\u629e\u80a2","\u77ed\u6587","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","\u9577\u6587","\u65e5\u4ed8"].includes(je)&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({variant:"outlined",required:!0,margin:"dense",size:"small",autoFocus:!0,label:"\u8868\u793a\u30c6\u30ad\u30b9\u30c8",InputLabelProps:{shrink:!0},placeholder:"\u9805\u76ee\u306e\u30bf\u30a4\u30c8\u30eb\u3084\u8cea\u554f\u306a\u3069\u306e\u6587\u5b57\u3067\u3059"},h("display")),{},{error:"display"in y})),["\u77ed\u6587","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","\u9577\u6587"].includes(je)&&(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({variant:"outlined",margin:"dense",size:"small",label:"\u4f8b\u6587",InputLabelProps:{shrink:!0},placeholder:"\u4f55\u3082\u5165\u529b\u3057\u3066\u306a\u3044\u6642\u306b\u8868\u793a\u3059\u308b\u6587\u5b57\u3067\u3059"},h("placeholder")),{},{error:"placeholder"in y})),(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{checked:ye||!1,onChange:function(e){g("required",e.target.checked,{shouldValidate:!0})}}),label:"\u5fc5\u9808\u9805\u76ee"}),"\u9078\u629e\u80a2"===je&&(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{checked:ve||!1,onChange:function(e){g("multiSelect",e.target.checked,{shouldValidate:!0})}}),label:"\u8907\u6570\u9078\u629e"}),"\u65e5\u4ed8"===je&&(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{checked:ke||!1,onChange:function(e){return g("useTime",e.target.checked,{shouldValidate:!0})}}),label:"\u6642\u523b\u6307\u5b9a"})]})]}),["\u77ed\u6587","\u9577\u6587","\u65e5\u4ed8"].includes(je)&&(0,ae.jsxs)(l.Z,{bgcolor:"#aaa3",p:1,gap:1,children:[(0,ae.jsx)(o.Z,{children:"Validate"}),(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[["\u77ed\u6587","\u9577\u6587"].includes(je)&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",label:"\u6700\u4f4e\u9577\u3055",value:Ze||"",type:"number",onChange:function(e){var n=e.target.value;n?/^[0-9]*$/.test(n)&&g("minlength",n,{shouldValidate:!0}):g("minlength","",{shouldValidate:!0})},error:"minlength"in y}),(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",label:"\u6700\u9ad8\u9577\u3055",value:ge||"",type:"number",onChange:function(e){var n=e.target.value;n?/^[1-9][0-9]*$/.test(n)&&g("maxlength",n,{shouldValidate:!0}):g("maxlength","",{shouldValidate:!0})},error:"maxlength"in y})]}),"\u9577\u6587"===je&&(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",type:"number",label:"\u884c\u6570",value:Ce||"",onChange:function(e){var n=e.target.value;n?1===Number(n)?g("rows","2",{shouldValidate:!0}):/^[1-9]([0-9])*$/.test(n)&&g("rows",n,{shouldValidate:!0}):g("rows","",{shouldValidate:!0})},error:"rows"in y})]}),"\u65e5\u4ed8"===je&&(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,ae.jsx)(H.M,{label:"\u6700\u4f4e\u65e5\u4ed8",inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:Ze?new Date(Ze):null,onChange:function(e){if(e){var n=(0,O.Z)(new Date(e),"yyyy-MM-dd");g("minlength",n,{shouldValidate:!0})}},renderInput:function(e){return(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({},e),{},{size:"small"}))}}),(0,ae.jsx)(H.M,{label:"\u6700\u9ad8\u65e5\u4ed8",inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:ge?new Date(ge):null,onChange:function(e){if(e){var n=(0,O.Z)(new Date(e),"yyyy-MM-dd");g("maxlength",n,{shouldValidate:!0})}},renderInput:function(e){return(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({},e),{},{size:"small"}))}})]}),"\u77ed\u6587"===je&&(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,ae.jsx)(M.Z,{children:"\u30c6\u30ad\u30b9\u30c8\u5165\u529b\u7cfb"}),(0,ae.jsxs)(z.Z,{row:!0,value:we||"",onChange:function(e){var n=e.target.value;g("textType",n||void 0,{shouldValidate:!0})},children:[(0,ae.jsx)(S.Z,{value:"",control:(0,ae.jsx)(T.Z,{}),label:"\u306a\u3057"}),(0,ae.jsx)(S.Z,{value:"en",control:(0,ae.jsx)(T.Z,{}),label:"\u82f1\u8a9e\u306e\u307f"}),(0,ae.jsx)(S.Z,{value:"num",control:(0,ae.jsx)(T.Z,{}),label:"\u6570\u5b57\u306e\u307f"}),(0,ae.jsx)(S.Z,{value:"en-num",control:(0,ae.jsx)(T.Z,{}),label:"\u82f1\u8a9e\u3068\u6570\u5b57"}),(0,ae.jsx)(S.Z,{value:"en-num-sym",control:(0,ae.jsx)(T.Z,{}),label:"\u82f1\u8a9e\u3068\u6570\u5b57\u3068\u8a18\u53f7"}),(0,ae.jsx)(S.Z,{value:"ja",control:(0,ae.jsx)(T.Z,{}),label:"\u65e5\u672c\u8a9e\u306e\u307f\uff08\u5168\u89d2\uff09"})]})]})]}),["\u4e00\u89a7","\u9078\u629e\u80a2"].includes(je)&&(0,ae.jsxs)(l.Z,{bgcolor:"#aaa3",p:1,gap:1,children:[(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,ae.jsx)(o.Z,{children:"Options"}),be.length>0&&(0,ae.jsx)(E.Z,{color:"info",onClick:function(){le(be.map((function(e){return e.text})).join("\n")),g("options",[],{shouldValidate:!0})},children:(0,ae.jsx)(_.QML,{})})]}),(0,ae.jsxs)(l.Z,{children:[(0,ae.jsx)(l.Z,{children:be.map((function(e,n){return(0,ae.jsxs)(l.Z,{direction:"row",gap:1,alignItems:"center",children:[n+1,".",ve?(0,ae.jsx)(q.Z,{}):(0,ae.jsx)(T.Z,{name:"radio",value:e.text}),(0,ae.jsx)(o.Z,{children:e.text}),(0,ae.jsx)(E.Z,{color:"error",onClick:function(){var n=be.filter((function(n){return n.id!==e.id}));g("options",n,{shouldValidate:!0}),0===n.length&&le("")},children:(0,ae.jsx)(K.ZkW,{})})]},n)}))}),void 0!==ie&&(0,ae.jsxs)(l.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",multiline:!0,fullWidth:!0,minRows:5,value:ie,placeholder:"\u4e00\u884c\u3065\u3064\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onBlur:function(){if(""!==ie.trim()){var e=Array.from(new Set(ie.split("\n").filter((function(e){return!!e.trim()})))).map((function(e){return{id:(0,Y.qR)(16),text:e}}));g("options",e,{shouldValidate:!0}),le(void 0)}},onChange:function(e){le(e.target.value)},error:be.filter((function(e){return e.text===ie})).length>1}),(0,ae.jsx)(E.Z,{color:"success",disabled:""===ie.trim(),onClick:function(){g("options",Array.from(new Set(ie.split("\n").filter((function(e){return!!e.trim()})))).map((function(e){return{id:(0,Y.qR)(16),text:e}})),{shouldValidate:!0}),le(void 0)},children:(0,ae.jsx)(Q.rux,{})})]})]})]}),(0,ae.jsxs)(l.Z,{direction:"row",gap:2,justifyContent:"flex-end",children:[(0,ae.jsx)(I.Z,{variant:"outlined",size:"small",startIcon:(0,ae.jsx)(_.SV5,{}),onClick:function(){he()},children:"\u9589\u3058\u308b"}),(0,ae.jsx)(j.Z,{variant:"contained",color:"success",disabled:Object.keys(y).length>0||["\u9078\u629e\u80a2","\u4e00\u89a7"].includes(je)&&0===be.length,loadingPosition:"start",size:"small",startIcon:(0,ae.jsx)(p.Z,{}),type:"submit",children:"\u78ba\u5b9a\u3059\u308b"})]})]}),!je&&(0,ae.jsx)(L.Z,{onClickAway:function(){return ne(!1)},children:(0,ae.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,width:"100%",sx:{"& .MuiTooltip-tooltip":{mt:"5px !important"}},children:(0,ae.jsx)(de,{TransitionComponent:W.Z,PopperProps:{disablePortal:!0},onClose:function(){return ne(!1)},open:k,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:(0,ae.jsxs)(R.Z,{elevation:2,children:[(0,ae.jsx)(o.Z,{fontWeight:600,p:1,bgcolor:"#eee",children:"\u56de\u7b54\u5f62\u5f0f\u306e\u9078\u629e"}),(0,ae.jsxs)(N.Z,{children:[(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)($.Yij,{})}),(0,ae.jsx)(A.Z,{children:"\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(K.g5G,{})}),(0,ae.jsx)(A.Z,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u77ed\u6587",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)($.sXe,{})}),(0,ae.jsx)(A.Z,{children:"\u77ed\u6587"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u9577\u6587",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(U.$e6,{})}),(0,ae.jsx)(A.Z,{children:"\u9577\u6587"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u65e5\u4ed8",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(X.cZx,{})}),(0,ae.jsx)(A.Z,{children:"\u65e5\u4ed8"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u9078\u629e\u80a2",{shouldValidate:!0}),le("")},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)($.LUU,{})}),(0,ae.jsx)(A.Z,{children:"\u9078\u629e\u80a2"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ne(!1),g("format","\u4e00\u89a7",{shouldValidate:!0}),le("")},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(J.Ken,{})}),(0,ae.jsx)(A.Z,{children:"\u4e00\u89a7"})]})]})]}),children:(0,ae.jsx)(I.Z,{startIcon:(0,ae.jsx)(p.Z,{}),onClick:function(){return ne(!0)},variant:"contained",color:"info",children:"\u30d5\u30a3\u30fc\u30eb\u30c9\u8ffd\u52a0"})})})})]})]})}var xe=t(58340);function he(){document.querySelectorAll("[data-maxlength]").forEach((function(e){var n=e.querySelector('input[type="text"],textarea');if(e.dataset.maxlength&&n){var t=e.querySelector("p.length");t||((t=document.createElement("p")).className="length",t.style.fontSize="0.9rem",e.appendChild(t)),t.innerText="\u6b8b\u308a\u6587\u5b57\u6570: "+(Number(e.dataset.maxlength)-n.value.length),n.oninput=function(){if(t){var r=n.value;t.innerText="\u6b8b\u308a\u6587\u5b57\u6570: "+(Number(e.dataset.maxlength)-r.length)}}}}))}function me(e){var n=e.formItems,t=(0,G.useCallback)((function(e,n){var t=e.format,r=e.display,i=e.maxlength,a=e.minlength,l=e.multiSelect,o=e.options,s=e.required,c=e.textType,d=e.placeholder,u=e.rows,x=e.useTime,h=e.name,m=(0,ae.jsx)(ae.Fragment,{}),p=function(e){var n=e.useFor;return void 0===n||n?(0,ae.jsx)(ae.Fragment,{children:(0,ae.jsxs)("label",{htmlFor:h,style:{display:"flex",alignItems:"center",margin:"10px 0 4px"},children:[r,s?(0,ae.jsx)("span",{style:{fontWeight:400,color:"#EC0000",marginLeft:4,fontSize:14},children:"\u5fc5\u9808"}):null]})}):(0,ae.jsxs)("label",{style:{display:"flex",alignItems:"center",margin:"10px 0 4px"},children:[r,s?(0,ae.jsx)("span",{style:{fontWeight:400,color:"#EC0000",marginLeft:4,fontSize:14},children:"\u5fc5\u9808"}):null]})};switch(t){case"\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09":m=(0,ae.jsx)(p,{useFor:!1});break;case"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{}),(0,ae.jsx)("input",{type:"email",placeholder:d,style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor",fontSize:"0.9rem"},name:h,id:h,minLength:parseInt("".concat(a))||void 0,maxLength:parseInt("".concat(i))||void 0})]});break;case"\u77ed\u6587":var f=void 0;"en"===c?f="[A-z\\s]{".concat(a||0,",").concat(i||"","}"):"num"===c?f="[0-9\\s]{".concat(a||0,",").concat(i||"","}"):"en-num"===c?f="[A-z0-9\\s]{".concat(a||0,",").concat(i||"","}"):"en-num-sym"===c?f="[A-Za-z0-9\\p{P}\\p{S}\\s]{".concat(a||0,",").concat(i||"","}"):"ja"===c&&(f="[\u4e00-\u9faf\u3041-\u3094\u309e\u309b\u309c\u30fc\u30a1-\u30fb\u30fd\u30fe\u309b\u309c\u30fc\uff10-\uff19\u3000]{".concat(a||0,",").concat(i||"","}")),m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{}),(0,ae.jsx)("input",{type:"text",placeholder:d,style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor",fontSize:"0.9rem"},name:h,id:h,minLength:parseInt("".concat(a))||void 0,maxLength:parseInt("".concat(i))||void 0,pattern:f})]});break;case"\u9577\u6587":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{}),(0,ae.jsx)("textarea",{placeholder:d,style:{width:"100%",lineHeight:"24px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor",resize:u?"none":"vertical",fontSize:"1rem"},name:h,id:h,rows:parseInt("".concat(u))||4,minLength:parseInt("".concat(a))||void 0,maxLength:parseInt("".concat(i))||void 0})]});break;case"\u65e5\u4ed8":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{useFor:!1}),(0,ae.jsx)("input",{type:x?"datetime-local":"date",style:{width:"100%",lineHeight:"32px",padding:"4px 10px",borderRadius:4,border:"1px solid currentColor"},name:h,id:h,min:a,max:i})]});break;case"\u9078\u629e\u80a2":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{useFor:!1}),(0,ae.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:o.map((function(e){return(0,ae.jsxs)("div",{style:{display:"flex",padding:"2px 10px",gap:"4px",margin:"2px 0"},children:[(0,ae.jsx)("input",{type:l?"checkbox":"radio",name:h,id:e.id,value:n?e.text:e.id}),(0,ae.jsx)("label",{htmlFor:e.id,style:{fontWeight:400},children:e.text})]},e.id)}))})]});break;case"\u4e00\u89a7":m=(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(p,{useFor:!1}),(0,ae.jsxs)("select",{name:h,id:h,style:{width:"100%",height:42,padding:"4px 10px",borderRadius:4,border:"1px solid currentColor"},children:[(0,ae.jsx)("option",{value:"",children:"--"}),o.map((function(e){return(0,ae.jsx)("option",{value:e.text,children:e.text},e.id)}))]})]})}return(0,ae.jsx)("div",{style:{display:n?"none":"block",marginBottom:"1rem"},"data-name":h,"data-required":s?"true":void 0,"data-maxlength":i,children:m})}),[]),r=(0,G.useMemo)((function(){var e=[],r=[];n.forEach((function(n){var i;e.push((0,xe.renderToStaticMarkup)((0,ae.jsx)(ae.Fragment,{children:t(n)}))),n.branch&&null!==(i=n.branchItems)&&void 0!==i&&i.length&&n.branchItems.forEach((function(i){i.list.forEach((function(a){r.push('\n            [data-name="'.concat(n.name,'"]:has(>div input#').concat(i.option,':checked) ~ [data-name="').concat(a.name,'"] {\n              display:block !important;\n            }\n            ')),e.push((0,xe.renderToStaticMarkup)((0,ae.jsx)(ae.Fragment,{children:t(a,!0)})))}))}))}));var i=document.createElement("div");i.innerHTML="\n    ".concat(e.join("\n"),"\n    ");var a=document.createElement("style");return a.appendChild(document.createTextNode(r.join("\n"))),i.appendChild(a),i}),[n,t]);return(0,G.useEffect)((function(){return he(),window.addEventListener("load",he),function(){window.removeEventListener("load",he)}}),[]),(0,ae.jsxs)(C.Z,{component:"form",sx:{px:2},onSubmit:function(e){e.preventDefault()},children:[(0,ae.jsx)(l.Z,{dangerouslySetInnerHTML:{__html:r.outerHTML}}),(0,ae.jsxs)("div",{style:{position:"relative",display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center",margin:"2rem auto",maxWidth:1024},children:[(0,ae.jsx)("button",{type:"reset",style:{display:"flex",width:256,height:56,justifyContent:"center",alignItems:"center",background:"#475569",borderRadius:4,border:"none",fontSize:15,color:"#fff",fontWeight:500,cursor:"pointer",transition:"all 200ms",margin:"10px 0"},onClick:function(){document.querySelectorAll("[data-maxlength]").forEach((function(e){var n=e.querySelector('input[type="text"],textarea'),t=e.querySelector("p.length");e.dataset.maxlength&&n&&t&&(t.innerText="\u6b8b\u308a\u6587\u5b57\u6570: "+Number(e.dataset.maxlength))}))},children:"\u30ea\u30bb\u30c3\u30c8"}),(0,ae.jsx)("button",{type:"submit",style:{display:"flex",width:256,height:56,justifyContent:"center",alignItems:"center",background:"#1D4ED8",borderRadius:4,border:"none",fontSize:15,color:"#fff",fontWeight:500,cursor:"pointer",transition:"all 200ms",margin:"10px 0"},children:"\u78ba\u8a8d\u753b\u9762\u3078"})]})]})}var pe=["className"],fe=(0,b.ZP)((function(e){var n=e.className,t=(0,h.Z)(e,pe);return(0,ae.jsx)(y.Z,(0,x.Z)((0,x.Z)({},t),{},{classes:{popper:n}}))}))((function(e){e.theme;return(0,u.Z)({},"& .".concat(w.Z.tooltip),{backgroundColor:"transparent",color:"rgba(0, 0, 0, 0.87)",maxWidth:"none"})}));function je(e){var n=e.loading,t=e.form,s=e.handleSave,c=ee.Ry({display:ee.Z_().when("format",{is:function(e){return"action"!==e},then:ee.Z_().required()})}),u=(0,B.cI)({resolver:(0,m.X)(c),defaultValues:{minlength:"",rows:"",options:[]}}),h=u.register,b=u.handleSubmit,y=u.setValue,w=u.getValues,ne=u.reset,te=u.watch,re=u.formState.errors,ie=(0,G.useState)(!1),le=(0,a.Z)(ie,2),se=le[0],ce=le[1],de=(0,G.useState)(),xe=(0,a.Z)(de,2),he=xe[0],pe=xe[1],je=(0,G.useState)(""),ge=(0,a.Z)(je,2),Ze=ge[0],ve=ge[1],be=(0,G.useState)(""),ye=(0,a.Z)(be,2),we=ye[0],Ce=ye[1],ke=(0,G.useState)("edit"),Ie=(0,a.Z)(ke,2),Ve=Ie[0],Se=Ie[1],Fe=(0,G.useState)(t.items),Me=(0,a.Z)(Fe,2),ze=Me[0],Te=Me[1],Ee=(0,G.useCallback)((function(){ne(),pe(void 0),ve(""),Ce("")}),[]),qe=(0,G.useMemo)((function(){return(0,ae.jsx)(oe,{form:ze,editMode:!0,selectItem:Ze,setFormContent:function(e){Te(e)},remove:function(e){Te(ze.filter((function(n){return n.name!==e})))},edit:function(e){ve(e.name),y("display",e.display),y("name",e.name),y("format",e.format),y("maxlength",e.maxlength),y("minlength",e.minlength),y("multiSelect",e.multiSelect),y("options",e.options),y("placeholder",e.placeholder),y("required",e.required),y("rows",e.rows),y("textType",e.textType),y("useTime",e.useTime),y("branch",e.branch),y("branchItems",e.branchItems),e.branchItems&&e.branchItems.length>0&&e.branch&&Ce(e.branchItems[0].option)}})}),[ze,Ze]);(0,G.useEffect)((function(){var e=te((function(e,n){n.name,n.type;e.format&&setTimeout((function(){var e;null===(e=document.getElementById("setting-form-item"))||void 0===e||e.scrollIntoView({block:"center",behavior:"smooth"})}),100)}));return function(){return e.unsubscribe()}}),[te]);var Le=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ze?(t=Array.from(ze),(i=t.findIndex((function(e){return e.name===Ze})))>=0&&(t.splice(i,1,(0,x.Z)((0,x.Z)({},n),{},{name:Ze})),Te(t))):Te([].concat((0,d.Z)(ze),[(0,x.Z)((0,x.Z)({},n),{},{name:"item"+(0,Y.qR)()})])),Ee();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),We=w(),Re=We.format,Ne=We.maxlength,Pe=We.minlength,De=We.multiSelect,Ae=We.options,He=We.required,Oe=We.textType,Ge=We.rows,Be=We.useTime,_e=We.branch,$e=We.branchItems;return(0,ae.jsxs)(l.Z,{children:[(0,ae.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",my:2,children:[(0,ae.jsx)(o.Z,{variant:"h6",children:"\u30d5\u30a9\u30fc\u30e0\u30b3\u30f3\u30c6\u30f3\u30c4"}),(0,ae.jsx)(j.Z,{sx:{display:"flex",width:160},disabled:0===ze.length||!!Ze,loading:n,loadingPosition:"start",startIcon:(0,ae.jsx)(f.Z,{}),variant:"outlined",color:"warning",onClick:(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ze||s(ze);case 1:case"end":return e.stop()}}),e)}))),children:"\u4fdd\u5b58\u3059\u308b"})]}),(0,ae.jsxs)(g.ZP,{value:Ve,children:[(0,ae.jsx)(C.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,ae.jsxs)(Z.Z,{value:Ve,onChange:function(e,n){Se("".concat(n))},children:[(0,ae.jsx)(k.Z,{label:"\u30c7\u30b6\u30a4\u30f3\u30e2\u30fc\u30c9",value:"edit"}),(0,ae.jsx)(k.Z,{label:"\u30d7\u30ec\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9",value:"view"})]})}),(0,ae.jsx)(v.Z,{value:"edit",sx:{p:0},children:(0,ae.jsx)(l.Z,{sx:{my:2,width:"100%",display:"flex",flexDirection:"column",py:4,px:1},children:qe})}),(0,ae.jsx)(v.Z,{value:"view",sx:{p:0},children:(0,ae.jsx)(me,{formItems:ze})})]}),(0,ae.jsxs)(l.Z,{width:"100%",justifyContent:"center",p:.5,sx:{minHeight:100},children:[Re&&(0,ae.jsxs)(l.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:b(Le),sx:{border:"1px solid #ccc",p:2,bgcolor:"#eee"},gap:2,id:"setting-form-item",children:[(0,ae.jsxs)(l.Z,{gap:1,children:[(0,ae.jsxs)(l.Z,{direction:"row",gap:2,justifyContent:"space-between",flex:1,children:[(0,ae.jsx)(o.Z,{children:Re}),(0,ae.jsx)(I.Z,{variant:"contained",color:"success",disabled:Object.keys(re).length>0||["\u9078\u629e\u80a2","\u4e00\u89a7"].includes(Re)&&0===Ae.length,size:"small",startIcon:(0,ae.jsx)(p.Z,{}),type:"submit",children:"\u78ba\u5b9a\u3059\u308b"}),(0,ae.jsx)(I.Z,{variant:"outlined",size:"small",startIcon:(0,ae.jsx)(_.SV5,{}),onClick:function(){Ee()},children:"\u9589\u3058\u308b"})]}),["\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09"].includes(Re)&&(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({variant:"outlined",required:!0,margin:"dense",autoFocus:!0,multiline:!0,minRows:3,fullWidth:!0,size:"small",label:"\u4ed5\u51fa\u3057"},h("display")),{},{error:"display"in re})),["\u4e00\u89a7","\u9078\u629e\u80a2","\u77ed\u6587","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","\u9577\u6587","\u65e5\u4ed8"].includes(Re)&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({variant:"outlined",required:!0,margin:"dense",size:"small",autoFocus:!0,label:"\u8868\u793a\u30c6\u30ad\u30b9\u30c8",InputLabelProps:{shrink:!0},placeholder:"\u9805\u76ee\u306e\u30bf\u30a4\u30c8\u30eb\u3084\u8cea\u554f\u306a\u3069\u306e\u6587\u5b57\u3067\u3059"},h("display")),{},{error:"display"in re})),["\u77ed\u6587","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","\u9577\u6587"].includes(Re)&&(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({variant:"outlined",margin:"dense",size:"small",label:"\u4f8b\u6587",InputLabelProps:{shrink:!0},placeholder:"\u4f55\u3082\u5165\u529b\u3057\u3066\u306a\u3044\u6642\u306b\u8868\u793a\u3059\u308b\u6587\u5b57\u3067\u3059"},h("placeholder")),{},{error:"placeholder"in re})),(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{checked:He||!1,onChange:function(e){y("required",e.target.checked,{shouldValidate:!0})}}),label:"\u5fc5\u9808\u9805\u76ee"}),"\u9078\u629e\u80a2"===Re&&(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{checked:De||!1,onChange:function(e){y("multiSelect",e.target.checked,{shouldValidate:!0})}}),label:"\u8907\u6570\u9078\u629e"}),"\u65e5\u4ed8"===Re&&(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{checked:Be||!1,onChange:function(e){return y("useTime",e.target.checked,{shouldValidate:!0})}}),label:"\u6642\u523b\u6307\u5b9a"})]})]}),["\u77ed\u6587","\u9577\u6587","\u65e5\u4ed8"].includes(Re)&&(0,ae.jsxs)(l.Z,{bgcolor:"#aaa3",p:1,gap:1,children:[(0,ae.jsx)(o.Z,{children:"Validate"}),(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[["\u77ed\u6587","\u9577\u6587"].includes(Re)&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",label:"\u6700\u4f4e\u9577\u3055",value:Pe||"",type:"number",onChange:function(e){var n=e.target.value;n?/^[0-9]*$/.test(n)&&y("minlength",n,{shouldValidate:!0}):y("minlength","",{shouldValidate:!0})},error:"minlength"in re}),(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",label:"\u6700\u9ad8\u9577\u3055",value:Ne||"",type:"number",onChange:function(e){var n=e.target.value;n?/^[1-9][0-9]*$/.test(n)&&y("maxlength",n,{shouldValidate:!0}):y("maxlength","",{shouldValidate:!0})},error:"maxlength"in re})]}),"\u9577\u6587"===Re&&(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",type:"number",label:"\u884c\u6570",value:Ge||"",onChange:function(e){var n=e.target.value;n?1===Number(n)?y("rows","2",{shouldValidate:!0}):/^[1-9]([0-9])*$/.test(n)&&y("rows",n,{shouldValidate:!0}):y("rows","",{shouldValidate:!0})},error:"rows"in re})]}),"\u65e5\u4ed8"===Re&&(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,ae.jsx)(H.M,{label:"\u6700\u4f4e\u65e5\u4ed8",inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:Pe?new Date(Pe):null,onChange:function(e){if(e){var n=(0,O.Z)(new Date(e),"yyyy-MM-dd");y("minlength",n,{shouldValidate:!0})}},renderInput:function(e){return(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({},e),{},{size:"small"}))}}),(0,ae.jsx)(H.M,{label:"\u6700\u9ad8\u65e5\u4ed8",inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:Ne?new Date(Ne):null,onChange:function(e){if(e){var n=(0,O.Z)(new Date(e),"yyyy-MM-dd");y("maxlength",n,{shouldValidate:!0})}},renderInput:function(e){return(0,ae.jsx)(V.Z,(0,x.Z)((0,x.Z)({},e),{},{size:"small"}))}})]}),"\u77ed\u6587"===Re&&(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,ae.jsx)(M.Z,{children:"\u30c6\u30ad\u30b9\u30c8\u5165\u529b\u7cfb"}),(0,ae.jsxs)(z.Z,{row:!0,value:Oe||"",onChange:function(e){var n=e.target.value;y("textType",n||void 0,{shouldValidate:!0})},children:[(0,ae.jsx)(S.Z,{value:"",control:(0,ae.jsx)(T.Z,{}),label:"\u306a\u3057"}),(0,ae.jsx)(S.Z,{value:"en",control:(0,ae.jsx)(T.Z,{}),label:"\u82f1\u8a9e\u306e\u307f"}),(0,ae.jsx)(S.Z,{value:"num",control:(0,ae.jsx)(T.Z,{}),label:"\u6570\u5b57\u306e\u307f"}),(0,ae.jsx)(S.Z,{value:"en-num",control:(0,ae.jsx)(T.Z,{}),label:"\u82f1\u8a9e\u3068\u6570\u5b57"}),(0,ae.jsx)(S.Z,{value:"en-num-sym",control:(0,ae.jsx)(T.Z,{}),label:"\u82f1\u8a9e\u3068\u6570\u5b57\u3068\u8a18\u53f7"}),(0,ae.jsx)(S.Z,{value:"ja",control:(0,ae.jsx)(T.Z,{}),label:"\u65e5\u672c\u8a9e\u306e\u307f\uff08\u5168\u89d2\uff09"})]})]})]}),["\u4e00\u89a7","\u9078\u629e\u80a2"].includes(Re)&&(0,ae.jsxs)(l.Z,{bgcolor:"#aaa3",p:1,gap:1,children:[(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,ae.jsx)(o.Z,{children:"Options"}),Ae.length>0&&(0,ae.jsx)(E.Z,{color:"info",onClick:function(){pe(Ae.map((function(e){return e.text})).join("\n")),y("options",[],{shouldValidate:!0})},children:(0,ae.jsx)(_.QML,{})})]}),(0,ae.jsxs)(l.Z,{children:[(0,ae.jsx)(l.Z,{children:Ae.map((function(e,n){return(0,ae.jsxs)(l.Z,{direction:"row",gap:1,alignItems:"center",children:[n+1,".",De?(0,ae.jsx)(q.Z,{}):(0,ae.jsx)(T.Z,{name:"radio",value:e.text}),(0,ae.jsx)(o.Z,{children:e.text}),(0,ae.jsx)(E.Z,{color:"error",onClick:function(){var n=Ae.filter((function(n){return n.id!==e.id}));y("options",n,{shouldValidate:!0}),0===n.length&&pe(""),$e&&y("branchItems",$e.filter((function(n){return n.option!==e.id})),{shouldValidate:!0})},children:(0,ae.jsx)(K.ZkW,{})})]},n)}))}),void 0!==he&&(0,ae.jsxs)(l.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,ae.jsx)(V.Z,{variant:"outlined",margin:"dense",size:"small",multiline:!0,fullWidth:!0,minRows:5,value:he,placeholder:"\u4e00\u884c\u3065\u3064\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onBlur:function(){if(""!==he.trim()){var e=Array.from(new Set(he.split("\n").filter((function(e){return!!e.trim()})))).map((function(e){return{id:(0,Y.qR)(16),text:e}}));y("options",e,{shouldValidate:!0});var n=e.map((function(e){var n=null===$e||void 0===$e?void 0:$e.find((function(n){return n.option===e.id}));return n||{option:e.id,list:[]}}));y("branchItems",n,{shouldValidate:!0}),Ce(e[0].id),pe(void 0)}},onChange:function(e){pe(e.target.value)},error:Ae.filter((function(e){return e.text===he})).length>1}),(0,ae.jsx)(E.Z,{color:"success",disabled:""===he.trim(),onClick:function(){y("options",Array.from(new Set(he.split("\n").filter((function(e){return!!e.trim()})))).map((function(e){return{text:e,id:(0,Y.qR)(16)}})),{shouldValidate:!0}),pe(void 0)},children:(0,ae.jsx)(Q.rux,{})})]})]}),!De&&"\u9078\u629e\u80a2"===Re&&(0,ae.jsx)(S.Z,{control:(0,ae.jsx)(F.Z,{disabled:0===Ae.length,checked:_e||!1,onChange:function(e){y("branch",e.target.checked,{shouldValidate:!0}),Ce(Ae[0].id),$e||y("branchItems",Ae.map((function(e){return{option:e.id,list:[]}})),{shouldValidate:!0})}}),label:"\u5206\u5c90\u9805\u76ee"})]})]}),_e&&!!$e&&Ae.length>0&&(0,ae.jsx)(l.Z,{sx:{border:"1px solid #ccc",bgcolor:"#eee",px:2},children:(0,ae.jsxs)(g.ZP,{value:we,children:[(0,ae.jsx)(C.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,ae.jsx)(Z.Z,{value:we,onChange:function(e,n){Ce("".concat(n))},variant:"scrollable",children:Ae.map((function(e){return(0,ae.jsx)(k.Z,{label:e.text,value:e.id},e.id)}))})}),Ae.map((function(e,n){return(0,ae.jsx)(v.Z,{value:e.id,sx:{p:0},children:(0,ae.jsx)(ue,{branchItems:$e.length>0?$e[n].list:[],setBranchItems:function(n){var t=Array.from($e||[]),r=t.findIndex((function(n){return n.option===e.id}));r>=0?(t.splice(r,1,{option:e.id,list:n}),y("branchItems",t,{shouldValidate:!0})):y("branchItems",[].concat(t,[{option:e.id,list:n}]),{shouldValidate:!0})}})},e.id)}))]})}),!Re&&(0,ae.jsx)(L.Z,{onClickAway:function(){return ce(!1)},children:(0,ae.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,width:"100%",sx:{"& .MuiTooltip-tooltip":{mt:"5px !important"}},children:(0,ae.jsx)(fe,{TransitionComponent:W.Z,PopperProps:{disablePortal:!0},onClose:function(){return ce(!1)},open:se,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:(0,ae.jsxs)(R.Z,{elevation:2,children:[(0,ae.jsx)(o.Z,{fontWeight:600,p:1,bgcolor:"#eee",children:"\u56de\u7b54\u5f62\u5f0f\u306e\u9078\u629e"}),(0,ae.jsxs)(N.Z,{children:[(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)($.Yij,{})}),(0,ae.jsx)(A.Z,{children:"\u6587\u7ae0\uff08\u56de\u7b54\u306a\u3057\uff09"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(K.g5G,{})}),(0,ae.jsx)(A.Z,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u77ed\u6587",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)($.sXe,{})}),(0,ae.jsx)(A.Z,{children:"\u77ed\u6587"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u9577\u6587",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(U.$e6,{})}),(0,ae.jsx)(A.Z,{children:"\u9577\u6587"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u65e5\u4ed8",{shouldValidate:!0})},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(X.cZx,{})}),(0,ae.jsx)(A.Z,{children:"\u65e5\u4ed8"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u9078\u629e\u80a2",{shouldValidate:!0}),pe("")},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)($.LUU,{})}),(0,ae.jsx)(A.Z,{children:"\u9078\u629e\u80a2"})]}),(0,ae.jsxs)(P.Z,{onClick:function(){ce(!1),y("format","\u4e00\u89a7",{shouldValidate:!0}),pe("")},children:[(0,ae.jsx)(D.Z,{children:(0,ae.jsx)(J.Ken,{})}),(0,ae.jsx)(A.Z,{children:"\u4e00\u89a7"})]})]})]}),children:(0,ae.jsx)(I.Z,{startIcon:(0,ae.jsx)(p.Z,{}),onClick:function(){return ce(!0)},variant:"contained",color:"info",children:"\u30d5\u30a3\u30fc\u30eb\u30c9\u8ffd\u52a0"})})})})]})]})}var ge=t(61059),Ze=t(68096),ve=t(30829),be=t(64415),ye=t(48367),we=t(94604),Ce=t(60251);function ke(e){var n,t=e.apiEndpoint,s=e.fieldName,c=e.label,d=e.value,x=void 0===d?0:d,h=e.list,p=e.readOnly,f=e.render,g=ee.Ry({}),Z=(0,ye.TL)(),v=(0,B.cI)({resolver:(0,m.X)(g),defaultValues:{value:x}}),b=v.handleSubmit,y=v.formState.errors,w=v.setValue,k=v.getValues,V=(0,G.useState)(!1),S=(0,a.Z)(V,2),F=S[0],M=S[1],z=(0,G.useState)(!1),T=(0,a.Z)(z,2),E=T[0],q=T[1],L=(0,G.useRef)(null);(0,G.useEffect)((function(){x&&w("value",x,{shouldValidate:!0})}),[x]);var W=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,a,l,o,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.value,!t||!s){e.next=16;break}return M(!0),e.prev=3,e.next=6,Ce.Z.put(t,(0,u.Z)({},s,i));case 6:a=e.sent,l=a.data,o=l.message,c=void 0===o?"":o,d=l.error,q(!1),Z(we.T9.addGlobalMessage({message:c,type:d?"error":"success"}));case 13:return e.prev=13,M(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,,13,16]])})));return function(n){return e.apply(this,arguments)}}();return(0,ae.jsx)(C.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:b(W),my:1,children:E?(0,ae.jsxs)(l.Z,{direction:{md:"row",xs:"column"},alignItems:"center",sx:{display:E?"flex":"none",maxWidth:{md:500,xs:300}},ref:L,children:[(0,ae.jsxs)(Ze.Z,{fullWidth:!0,size:"small",children:[(0,ae.jsx)(ve.Z,{children:c}),(0,ae.jsx)(be.Z,{label:c,value:k("value"),onChange:function(e){w("value",Number(e.target.value),{shouldValidate:!0})},error:"value"in y,children:h.map((function(e){return(0,ae.jsx)(P.Z,{value:e.value,children:e.text},e.value)}))})]}),(0,ae.jsxs)(l.Z,{direction:"row",sx:{my:1},children:[(0,ae.jsx)(I.Z,{sx:{mx:.5,px:.5,minWidth:0},size:"small",color:"error",variant:"outlined",onClick:function(){q(!1),w("value",x,{shouldValidate:!0})},children:(0,ae.jsx)(_.SV5,{className:"text-lg"})}),(0,ae.jsx)(j.Z,{disabled:Object.keys(y).length>0,loading:F,sx:{mx:.5,px:.5,minWidth:0},size:"small",variant:"outlined",type:"submit",children:(0,ae.jsx)(_.JMf,{className:"text-lg"})})]})]}):(0,ae.jsxs)(l.Z,{direction:{md:"row",xs:"column"},spacing:2,sx:{display:E?"none":"flex"},alignItems:{md:"center",xs:"flex-start"},children:[(0,ae.jsx)(o.Z,{fontWeight:"bold",variant:"body2",flex:"none",children:c}),(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[f?f():(0,ae.jsx)(o.Z,{children:(null===(n=h.find((function(e){return e.value===k("value")})))||void 0===n?void 0:n.text)||""}),!p&&(0,ae.jsx)(I.Z,{sx:{flex:"none",mx:1,p:.2,minWidth:0},size:"small",variant:"outlined",color:"info",onClick:function(){q(!0)},children:(0,ae.jsx)(X.FNg,{className:"text-lg"})})]})]})})}var Ie=t(87376),Ve=t(57689),Se=t(11087),Fe=t(38100),Me=t(63442),ze=t(32896);function Te(){var e=(0,Ve.UO)().id,n=(0,ye.TL)(),t=(0,Ve.s0)(),d=(0,Ve.TH)(),u=(0,ye.CG)((function(e){return e.UI.tokenInfo})),x=(0,ye.CG)((function(e){return e.Form.status})),h=(0,ye.CG)((function(e){return e.Form.list}));(0,G.useEffect)((function(){if(!e)return t(-1);"init"===x&&n((0,Me.VT)())}),[e]);var m=(0,ye.CG)((function(e){return e.CMS.Web.list})),p=(0,ye.CG)((function(e){return e.CMS.Web.status})),f=(0,ye.CG)((function(e){return e.Group.list})),j=(0,ye.CG)((function(e){return e.Group.status}));(0,G.useEffect)((function(){"init"===j&&n((0,ze.jA)())}),[]),(0,G.useEffect)((function(){"init"===p&&n((0,Fe.PI)())}),[]);var g=(0,G.useState)(!1),Z=(0,a.Z)(g,2),v=Z[0],b=Z[1];if(!e||!u)return null;var y=h.find((function(n){return n.id===parseInt(e)})),w=f.find((function(e){return e.id===u.groupId}));return y&&w?(0,ae.jsxs)(l.Z,{gap:1,my:2,children:[(0,ae.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:2,sx:{},children:[(0,ae.jsx)(o.Z,{color:"primary.dark",variant:"h5",sx:{fontWeight:600},children:"\u30d5\u30a9\u30fc\u30e0\u8a2d\u5b9a"}),(0,ae.jsx)(Se.rU,{to:"/form/".concat(e,"/delete"),state:{location:d},children:(0,ae.jsx)(c.Z,{text:"\u524a\u9664",sx:{width:150,py:"2px",fontSize:14}})})]}),(0,ae.jsxs)(l.Z,{gap:1,my:2,children:[(0,ae.jsx)(ge.Z,{label:"\u30d5\u30a9\u30fc\u30e0\u540d",value:y.name,apiEndpoint:"/api/form/"+e,fieldName:"name",readOnly:u.permissions[Ie.g.FORM]<2,useGroupName:!0,group:w}),(0,ae.jsx)(ke,{label:"\u4f7f\u7528\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8",list:m.map((function(e){return{value:e.id,text:e.name}})),value:y.webId,apiEndpoint:"/api/form/"+e,fieldName:"webId",readOnly:u.permissions[Ie.g.FORM]<2}),(0,ae.jsx)(ge.Z,{label:"\u958b\u59cb\u65e5",datePicker:!0,value:y.startDate,apiEndpoint:"/api/form/"+e,fieldName:"startDate",readOnly:u.permissions[Ie.g.FORM]<2}),(0,ae.jsx)(ge.Z,{label:"\u7d42\u4e86\u65e5",datePicker:!0,value:y.endDate,apiEndpoint:"/api/form/"+e,fieldName:"endDate",readOnly:u.permissions[Ie.g.FORM]<2})]}),(0,ae.jsx)(l.Z,{alignItems:"stretch",gap:1,children:(0,ae.jsx)(je,{form:y,loading:v,handleSave:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var a,l,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(!0),t.next=4,s.F.update({id:e,items:i});case 4:a=t.sent,l=a.error,o=a.message,n(we.T9.addGlobalMessage({message:o,type:l?"error":"success"}));case 8:return t.prev=8,b(!1),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}()})})]}):null}},93859:function(e,n,t){t.d(n,{WS:function(){return s},c8:function(){return d},qR:function(){return o}});var r=t(74165),i=t(15861),a=t(90737),l=t.n(a);function o(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n="",t="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;)n+=t.charAt(0===r?Math.floor(26*Math.random()):Math.floor(36*Math.random())),r+=1;return n}var s=function(e,n,t){return l()('\n\t<html lang="ja">\n\t\t<head>\n\t\t\t'.concat(n,"\n\t\t\t<style>\n\t\t\t\t").concat(t||"","\n\t\t\t</style>\n\t\t</head>\n\t\t<body>\n\t\t\t").concat(e,"\n\t\t</body>\n\t</html>\n"),{ocd:!0})},c=function(e){return new Promise((function(n){return setTimeout(n,e)}))},d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=document.createElement("div")).innerHTML=(null===(n=document.getElementById("edit-area"))||void 0===n?void 0:n.innerHTML)||"",i=t.querySelectorAll("[data-editable]")){e.next=5;break}return e.abrupt("return");case 5:return a={},e.next=8,c(0);case 8:return i.forEach((function(e){var n=e,t=e.dataset.editable;n.querySelectorAll('[data-block="left-actions"],[data-block="bottom-actions"]').forEach((function(e){e.remove()})),a[t]=n.outerHTML.replaceAll(/ contenteditable="true"/g,"")})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=1267.4a5143cd.chunk.js.map