"use strict";(self.webpackChunkcaa_client=self.webpackChunkcaa_client||[]).push([[8948],{68948:function(e,r,n){n.r(r),n.d(r,{default:function(){return U}});var t=n(74165),o=n(15861),a=n(29439),i=n(4942),l=n(1413),c=n(45987),u=n(82851),s=n(39709),d=n(83449),f=n(47283),p=n(66934),h=n(97639),x=n(69293),v=n(53767),m=n(20890),w=n(36151),Z=n(68870),b=n(43896),g=n(58069),j=n(74310),C=n(27656),y=n(16386),M=n(87376),k=n(72791),N=n(57689),P=n(11087),T=n(48367),S=n(94604),_=n(80184),G=["className"],R=(0,p.ZP)((function(e){var r=e.className,n=(0,c.Z)(e,G);return(0,_.jsx)(h.Z,(0,l.Z)((0,l.Z)({},n),{},{classes:{popper:r}}))}))((function(e){var r=e.theme;return(0,i.Z)({},"& .".concat(x.Z.tooltip),{backgroundColor:"#fff",color:"rgba(0, 0, 0, 0.87)",maxWidth:500,fontSize:r.typography.pxToRem(12),border:"1px solid #ccc",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"})}));function U(){var e=(0,N.TH)(),r=(0,T.CG)((function(e){return e.UI.tokenInfo})),n=(0,T.TL)(),i=(0,T.CG)((function(e){return e.Workflow.list})),l=(0,k.useState)("created"),c=(0,a.Z)(l,2),p=c[0],h=c[1],x=(0,k.useState)(!1),G=(0,a.Z)(x,2),U=G[0],D=G[1],H=(0,k.useMemo)((function(){var r=i.filter((function(e){return e.status===p}));return(0,_.jsx)(v.Z,{sx:{border:"1px solid #ccc",mt:1},children:(0,_.jsx)(u.Z,{value:p,sx:{p:0},children:(0,_.jsx)(g._,{rows:r,columns:[{field:"type",headerName:"\u4f9d\u983c\u985e",flex:1,renderCell:function(e){return"public"===e.row.type?(0,_.jsx)(m.Z,{color:"#fff",sx:{fontWeight:"bold",bgcolor:"#5f9809",width:"100%",textAlign:"center"},children:"\u516c\u958b\u4f9d\u983c"}):(0,_.jsx)(m.Z,{color:"#fff",sx:{fontWeight:"bold",bgcolor:"#980928",width:"100%",textAlign:"center"},children:"\u60b2\u516c\u958b\u4f9d\u983c"})}},{field:"senderUser",headerName:"\u4f9d\u983c\u8005",flex:1,renderCell:function(e){return e.row.senderUser.email}},{field:"url",headerName:"\u30da\u30fc\u30b8URL",flex:1,renderCell:function(e){return(0,_.jsx)(P.rU,{to:"".concat("","/staging/").concat(e.row.page.web.name).concat(e.row.page.url),target:"_blank",children:e.row.page.url})}},{field:"hopeTime",headerName:"\u4e88\u5b9a",flex:1,renderCell:function(e){return(0,y.Z)(new Date(e.row.hopeTime),"yyyy\u5e74MM\u6708dd\u65e5 HH:mm")}},{field:"other",headerName:"\u8a18\u4e8b",flex:1,renderCell:function(e){return(0,_.jsx)(R,{title:e.row.other,children:(0,_.jsx)(m.Z,{variant:"caption",children:e.row.other})})}},{field:"actions",headerName:"created"===p?"\u52d5\u4f5c":"\u5b9f\u65bd\u6642\u9593",flex:1,renderCell:function(r){return"created"===p?(0,_.jsxs)(v.Z,{direction:"row",justifyContent:"center",width:"15%",minWidth:200,gap:1,children:[(0,_.jsx)(P.rU,{to:"/workflow/".concat(r.id,"/reject"),state:{location:e},children:(0,_.jsx)(w.Z,{size:"small",variant:"contained",color:"error",disabled:U,sx:{p:0,px:1},children:"\u5374\u4e0b"})}),(0,_.jsx)(s.Z,{size:"small",variant:"contained",loading:U,color:"success",sx:{p:0,px:1},onClick:(0,o.Z)((0,t.Z)().mark((function e(){var o,a,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(!0),e.next=4,j.g.approval({id:r.row.id});case 4:o=e.sent,a=o.error,i=o.message,n(S.T9.addGlobalMessage({type:a?"error":"success",message:i}));case 8:return e.prev=8,D(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])}))),children:"\u627f\u8a8d"})]}):(0,_.jsx)(m.Z,{width:"15%",minWidth:200,children:(0,y.Z)(new Date(r.row.updatedAt),"yyyy\u5e74MM\u6708dd\u65e5 HH:mm")})}}],initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},getRowClassName:function(e){return"public"===e.row.type?"workflow workflow__public":"workflow workflow__un-public"},pageSizeOptions:[10,20,30,50],sx:{"& .MuiDataGrid-cell:focus":{outline:"none"},"& .MuiDataGrid-cell:focus-within":{outline:"none"},"& .MuiDataGrid-cell:hover":{},"& .MuiDataGrid-columnHeaders":{bgcolor:"primary.dark",color:"#fff"},"& .MuiDataGrid-columnHeaders svg":{color:"#fff"}},density:"compact",hideFooterSelectedRowCount:!0,disableColumnMenu:!0,disableRowSelectionOnClick:!0})})})}),[n,i,U,e,p]);return!r||!r.workflow&&r.permissions[M.g.CONFIG]<4?(0,_.jsx)(C.Z,{}):(0,_.jsxs)(v.Z,{gap:1,children:[(0,_.jsx)(v.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:2,sx:{},children:(0,_.jsx)(m.Z,{sx:{fontWeight:600},variant:"h5",children:"\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u4e00\u89a7"})}),(0,_.jsx)(v.Z,{children:(0,_.jsxs)(d.ZP,{value:p,children:[(0,_.jsx)(Z.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,_.jsxs)(f.Z,{value:p,onChange:function(e,r){h("".concat(r))},children:[(0,_.jsx)(b.Z,{label:"\u672a\u627f\u8a8d",value:"created"}),(0,_.jsx)(b.Z,{label:"\u627f\u8a8d\u6e08",value:"accepted"}),(0,_.jsx)(b.Z,{label:"\u5374\u4e0b",value:"rejected"}),(0,_.jsx)(b.Z,{label:"\u5dee\u3057\u623b\u3057",value:"remanded"})]})}),H]})})]})}},83449:function(e,r,n){n.d(r,{ZP:function(){return l},_i:function(){return c},pQ:function(){return s},uU:function(){return u}});var t=n(29439),o=n(72791),a=n(80184),i=o.createContext(null);function l(e){var r=e.children,n=e.value,l=function(){var e=o.useState(null),r=(0,t.Z)(e,2),n=r[0],a=r[1];return o.useEffect((function(){a("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),n}(),c=o.useMemo((function(){return{idPrefix:l,value:n}}),[l,n]);return(0,a.jsx)(i.Provider,{value:c,children:r})}function c(){return o.useContext(i)}function u(e,r){return null===e.idPrefix?null:"".concat(e.idPrefix,"-P-").concat(r)}function s(e,r){return null===e.idPrefix?null:"".concat(e.idPrefix,"-T-").concat(r)}},47283:function(e,r,n){var t=n(87462),o=n(63366),a=n(72791),i=n(2101),l=n(83449),c=n(80184),u=["children"],s=a.forwardRef((function(e,r){var n=e.children,s=(0,o.Z)(e,u),d=(0,l._i)();if(null===d)throw new TypeError("No TabContext provided");var f=a.Children.map(n,(function(e){return a.isValidElement(e)?a.cloneElement(e,{"aria-controls":(0,l.uU)(d,e.props.value),id:(0,l.pQ)(d,e.props.value)}):null}));return(0,c.jsx)(i.Z,(0,t.Z)({},s,{ref:r,value:d.value,children:f}))}));r.Z=s},82851:function(e,r,n){n.d(r,{Z:function(){return v}});var t=n(87462),o=n(63366),a=n(72791),i=n(28182),l=n(66934),c=n(31402),u=n(94419),s=n(21217);function d(e){return(0,s.Z)("MuiTabPanel",e)}(0,n(75878).Z)("MuiTabPanel",["root"]);var f=n(83449),p=n(80184),h=["children","className","value"],x=(0,l.ZP)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(e){return{padding:e.theme.spacing(3)}})),v=a.forwardRef((function(e,r){var n=(0,c.Z)({props:e,name:"MuiTabPanel"}),a=n.children,l=n.className,s=n.value,v=(0,o.Z)(n,h),m=(0,t.Z)({},n),w=function(e){var r=e.classes;return(0,u.Z)({root:["root"]},d,r)}(m),Z=(0,f._i)();if(null===Z)throw new TypeError("No TabContext provided");var b=(0,f.uU)(Z,s),g=(0,f.pQ)(Z,s);return(0,p.jsx)(x,(0,t.Z)({"aria-labelledby":g,className:(0,i.Z)(w.root,l),hidden:s!==Z.value,id:b,ref:r,role:"tabpanel",ownerState:m},v,{children:s===Z.value&&a}))}))}}]);
//# sourceMappingURL=8948.1dd88f41.chunk.js.map