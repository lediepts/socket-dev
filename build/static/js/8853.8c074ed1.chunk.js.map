{"version":3,"file":"static/js/8853.8c074ed1.chunk.js","mappings":"+SAOe,SAASA,IACvB,IAAMC,GAAYC,EAAAA,EAAAA,KAAe,SAACC,GAAC,OAAKA,EAAEC,GAAGH,SAAS,IACtDI,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/BI,EAAKF,EAAA,GAAEG,EAAQH,EAAA,GACdI,GAAgBC,EAAAA,EAAAA,MAAhBD,YACFE,GAAMC,EAAAA,EAAAA,MAeZ,IAdAC,EAAAA,EAAAA,YAAU,WACJd,GAAcA,EAAUe,YAAef,EAAUgB,UAGrDC,EAAAA,SAAgBjB,EAAUe,YAAYG,MAAK,SAACC,GAC3C,IAAMC,EAAOC,SAASC,eAAe,WACjCF,IACHA,EAAKG,UAAY,GACjBH,EAAKI,YAAYL,GAEnB,IARAP,EAAI,SAUN,GAAG,CAACZ,EAAWY,KAEVZ,EACJ,OAAO,KAER,IAAMyB,EAAY,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAC,EAAAC,EAAAhB,EAAA,OAAAY,EAAAA,EAAAA,KAAAR,MAAA,SAAAa,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEe,OAFfF,EAAAC,KAAA,EAEXH,EAA+B/B,EAA/B+B,MAAOC,EAAwBhC,EAAxBgC,SAAUhB,EAAchB,EAAdgB,UAASiB,EAAAE,KAAA,EAC5BzB,EAAYqB,EAAOC,EAAS,GAADI,OAAKpB,GAAaR,GAAM,OAAAyB,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAI,GAAAJ,EAAA,iCAAAA,EAAAK,OAAA,GAAAR,EAAA,kBAE1D,kBALiB,OAAAJ,EAAAa,MAAA,KAAAC,UAAA,KAMlB,OACCC,EAAAA,EAAAA,MAACC,EAAAA,EAAK,CAACC,eAAe,SAASC,WAAW,SAAQC,SAAA,EACjDC,EAAAA,EAAAA,KAACC,EAAAA,EAAG,CAACC,GAAG,UAAUC,GAAI,CAAEC,OAAQ,qBAChCT,EAAAA,EAAAA,MAACC,EAAAA,EAAK,CACLS,IAAK,EACLC,UAAU,OACVC,YAAU,EACVC,aAAa,MACbC,SAAU,SAACC,GACVA,EAAEC,iBACFD,EAAEE,kBACFjC,GACD,EAAEoB,SAAA,EAEFC,EAAAA,EAAAA,KAACa,EAAAA,EAAU,CAAAd,SAAC,kKACZC,EAAAA,EAAAA,KAACc,EAAAA,EAAS,CACTC,QAAQ,WACRC,UAAQ,EACRC,OAAO,QACPC,WAAS,EACTC,KAAK,QACLC,MAAO,qBACPC,WAAS,EACTb,aAAa,KACbc,YAAY,kFACZC,MAAO7D,EACP8D,SAAU,SAACd,GACV/C,EAAS+C,EAAEe,OAAOF,MACnB,KAEDvB,EAAAA,EAAAA,KAAC0B,EAAAA,EAAM,CAACX,QAAQ,WAAWY,KAAK,SAAQ5B,SAAC,oCAGzCC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAM,CACNE,MAAM,OACNzB,GAAI,CACH0B,UAAW,OAEZd,QAAQ,WACRe,QACC,kBAAMC,OAAOC,KAAK,mBAAoB,SAAS,EAC/CjC,SACD,iEAML,C","sources":["pages/Auth/VerifyOtp.tsx"],"sourcesContent":["import { Button, TextField, Typography } from '@mui/material'\nimport { Box, Stack } from '@mui/system'\nimport QRCode from 'qrcode'\nimport { useEffect, useState } from 'react'\nimport { useNavigate } from 'react-router'\nimport { useAppSelector, useAuth } from 'redux/hooks'\n\nexport default function VerifyOtp() {\n\tconst loginInfo = useAppSelector((s) => s.UI.loginInfo)\n\tconst [token, setToken] = useState('')\n\tconst { verifyToken } = useAuth()\n\tconst nav = useNavigate()\n\tuseEffect(() => {\n\t\tif (!loginInfo || !loginInfo.otpauthUrl || !loginInfo.otpSecret) {\n\t\t\tnav('/login')\n\t\t} else {\n\t\t\tQRCode.toCanvas(loginInfo.otpauthUrl).then((cv) => {\n\t\t\t\tconst wrap = document.getElementById('qr-code')\n\t\t\t\tif (wrap) {\n\t\t\t\t\twrap.innerHTML = ''\n\t\t\t\t\twrap.appendChild(cv)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}, [loginInfo, nav])\n\n\tif (!loginInfo) {\n\t\treturn null\n\t}\n\tconst handleSubmit = async () => {\n\t\ttry {\n\t\t\tconst { email, password, otpSecret } = loginInfo\n\t\t\tawait verifyToken(email, password, `${otpSecret}`, token)\n\t\t} catch (error) {}\n\t}\n\treturn (\n\t\t<Stack justifyContent=\"center\" alignItems=\"center\">\n\t\t\t<Box id=\"qr-code\" sx={{ border: '1px solid #eee' }} />\n\t\t\t<Stack\n\t\t\t\tgap={1}\n\t\t\t\tcomponent=\"form\"\n\t\t\t\tnoValidate\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\te.preventDefault()\n\t\t\t\t\te.stopPropagation()\n\t\t\t\t\thandleSubmit()\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Typography>アプリに登録したうえで、下のコード入力をしてください</Typography>\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\trequired\n\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\tfullWidth\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tlabel={'コード'}\n\t\t\t\t\tautoFocus\n\t\t\t\t\tautoComplete=\"on\"\n\t\t\t\t\tplaceholder=\"6桁の数字を入力してください\"\n\t\t\t\t\tvalue={token}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetToken(e.target.value)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Button variant=\"outlined\" type=\"submit\">\n\t\t\t\t\tコード認証\n\t\t\t\t</Button>\n\t\t\t\t<Button \n\t\t\t\t\tcolor='info'\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tmarginTop: '3em',\n\t\t\t\t\t}}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tonClick={\n\t\t\t\t\t\t() => window.open('/login/guide-otp', '_blank')\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tAuthenticatorアプリ登録方法\n\t\t\t\t</Button>\n\t\t\t</Stack>\n\t\t</Stack>\n\t)\n}\n"],"names":["VerifyOtp","loginInfo","useAppSelector","s","UI","_useState","useState","_useState2","_slicedToArray","token","setToken","verifyToken","useAuth","nav","useNavigate","useEffect","otpauthUrl","otpSecret","QRCode","then","cv","wrap","document","getElementById","innerHTML","appendChild","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","_context","prev","next","concat","t0","stop","apply","arguments","_jsxs","Stack","justifyContent","alignItems","children","_jsx","Box","id","sx","border","gap","component","noValidate","autoComplete","onSubmit","e","preventDefault","stopPropagation","Typography","TextField","variant","required","margin","fullWidth","size","label","autoFocus","placeholder","value","onChange","target","Button","type","color","marginTop","onClick","window","open"],"sourceRoot":""}