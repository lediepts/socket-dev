"use strict";(self.webpackChunkcaa_client=self.webpackChunkcaa_client||[]).push([[1644],{12457:function(n,e,t){t.d(e,{Z:function(){return Z}});var r=t(74165),i=t(15861),o=t(1413),a=t(39709),u=t(53767),s=t(39157),c=t(68870),d=t(5574),l=t(97123),f=t(65661),p=t(55931),x=t(72791),m=t(80184),h=x.forwardRef((function(n,e){return(0,m.jsx)(p.Z,(0,o.Z)({direction:"down",ref:e},n))}));function Z(n){var e=n.open,t=n.loading,o=n.title,p=void 0===o?"":o,Z=n.maxWidth,v=void 0===Z?"sm":Z,w=n.primaryButton,g=void 0===w||w,j=n.closeButtonText,b=void 0===j?"\u9589\u3058\u308b":j,k=n.primaryButtonText,y=void 0===k?"\u5b9f\u65bd\u3059\u308b":k,C=n.children,E=n.primaryButtonColor,G=void 0===E?"primary":E,T=n.component,B=void 0===T?"div":T,S=n.disabled,D=void 0!==S&&S,M=n.backdropClick,W=n.useEnterKey,I=void 0===W||W,N=n.handleClose,R=n.handleSubmit;return(0,x.useEffect)((function(){var n=function(n){"Enter"===n.key&&I&&R&&!D&&R()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[D,R,I]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d.Z,{open:e,TransitionComponent:h,fullWidth:!0,maxWidth:v,onClose:function(n,e){(M||"backdropClick"!==e)&&N()},sx:{"& .MuiPaper-root":{opacity:.98,margin:1,width:{sm:"100%",md:"95%"}}},children:(0,m.jsxs)(u.Z,{component:B,spacing:1,children:[(0,m.jsx)(f.Z,{sx:{fontWeight:"bold",py:1},children:p}),(0,m.jsx)(s.Z,{children:(0,m.jsx)(c.Z,{sx:{py:1,maxHeight:"75vh"},children:C})}),(0,m.jsx)(l.Z,{children:(0,m.jsxs)(u.Z,{width:"100%",direction:"row",justifyContent:"space-around",alignItems:"center",mb:1,children:[(0,m.jsx)(a.Z,{loading:t,variant:"outlined",color:"inherit",size:"small",sx:{width:100},onClick:function(){return N()},children:b}),g&&(0,m.jsx)(a.Z,{loading:t,variant:"contained",color:G,disabled:D,size:"small",type:"form"===B?"submit":"button",sx:{width:100},onClick:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),e.stopPropagation(),n.t0=R,!n.t0){n.next=6;break}return n.next=6,R();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:y})]})})]})})})}},91644:function(n,e,t){t.r(e),t.d(e,{default:function(){return w}});var r=t(93433),i=t(74165),o=t(15861),a=t(29439),u=t(53767),s=t(20890),c=t(81918),d=t(40341),l=t(12457),f=t(72791),p=t(16856),x=t(57689),m=t(48367),h=t(32896),Z=t(94604),v=t(80184);function w(){var n=(0,x.s0)(),e=(0,x.UO)().id,t=(0,m.CG)((function(n){return n.Mailing.list})).find((function(n){return n.id===Number(e)})),w=(0,f.useState)(!1),g=(0,a.Z)(w,2),j=g[0],b=g[1],k=(0,f.useState)(!0),y=(0,a.Z)(k,2),C=y[0],E=y[1],G=(0,m.CG)((function(n){return n.Group.list})),T=(0,m.CG)((function(n){return n.Group.status})),B=(0,m.TL)(),S=(0,f.useState)([]),D=(0,a.Z)(S,2),M=D[0],W=D[1];return(0,f.useEffect)((function(){"init"===T&&B((0,h.jA)())}),[]),(0,f.useEffect)((function(){W(G.filter((function(n){return t&&t.allowGroup.includes(n.id)})))}),[G,t]),(0,f.useEffect)((function(){return function(){E(!1)}}),[]),t&&e?(0,v.jsx)(l.Z,{open:C,loading:j,handleClose:function(){n("/mailing/"+e)},title:"\u30e1\u30fc\u30eb\u30b0\u30eb\u30fc\u30d7\u9001\u4fe1\u53ef\u80fd\u7d44\u7e54\u8a2d\u5b9a",primaryButtonColor:"error",primaryButtonText:"\u8a2d\u5b9a\u3059\u308b",handleSubmit:(0,o.Z)((0,i.Z)().mark((function t(){var r,o,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return");case 3:return b(!0),t.next=6,d.g.update({id:e,allowGroup:M.map((function(n){return n.id}))});case 6:r=t.sent,o=r.message,a=r.error,B(Z.T9.addGlobalMessage({message:o,type:a?"error":"success"})),a||n("/mailing/"+e);case 11:return t.prev=11,b(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,,11,14]])}))),children:(0,v.jsxs)(u.Z,{gap:1,children:[(0,v.jsx)(s.Z,{children:"\u9001\u4fe1\u53ef\u80fd\u7d44\u7e54"}),(0,v.jsx)(u.Z,{direction:"row",gap:1,sx:{border:"1px solid #eee",p:2},children:M.map((function(n){return(0,v.jsx)(c.Z,{color:"success",label:n.name,variant:"outlined",onDelete:function(){return W(M.filter((function(e){return e.id!==n.id})))}},n.id)}))}),(0,v.jsx)(s.Z,{children:"\u9001\u4fe1\u4e0d\u53ef\u7d44\u7e54"}),(0,v.jsx)(u.Z,{direction:"row",gap:1,flexWrap:"wrap",sx:{border:"1px solid #eee",p:2},children:G.filter((function(n){return!M.find((function(e){return e.id===n.id}))})).map((function(n){return(0,v.jsx)(c.Z,{label:n.name,variant:"outlined",onDelete:function(){return W([].concat((0,r.Z)(M),[n]))},deleteIcon:(0,v.jsx)(p.OrI,{})},n.id)}))})]})}):null}},65661:function(n,e,t){var r=t(87462),i=t(63366),o=t(72791),a=t(28182),u=t(94419),s=t(20890),c=t(66934),d=t(31402),l=t(17673),f=t(85090),p=t(80184),x=["className","id"],m=(0,c.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(n,e){return e.root}})({padding:"16px 24px",flex:"0 0 auto"}),h=o.forwardRef((function(n,e){var t=(0,d.Z)({props:n,name:"MuiDialogTitle"}),s=t.className,c=t.id,h=(0,i.Z)(t,x),Z=t,v=function(n){var e=n.classes;return(0,u.Z)({root:["root"]},l.a,e)}(Z),w=o.useContext(f.Z).titleId,g=void 0===w?c:w;return(0,p.jsx)(m,(0,r.Z)({component:"h2",className:(0,a.Z)(v.root,s),ownerState:Z,ref:e,variant:"h6",id:null!=c?c:g},h))}));e.Z=h}}]);
//# sourceMappingURL=1644.a8c90bcd.chunk.js.map