"use strict";(self.webpackChunkcaa_client=self.webpackChunkcaa_client||[]).push([[1471],{12457:function(n,t,e){e.d(t,{Z:function(){return v}});var r=e(74165),i=e(15861),o=e(1413),a=e(39709),c=e(53767),s=e(39157),d=e(68870),l=e(5574),u=e(97123),f=e(65661),h=e(55931),x=e(72791),p=e(80184),m=x.forwardRef((function(n,t){return(0,p.jsx)(h.Z,(0,o.Z)({direction:"down",ref:t},n))}));function v(n){var t=n.open,e=n.loading,o=n.title,h=void 0===o?"":o,v=n.maxWidth,Z=void 0===v?"sm":v,w=n.primaryButton,j=void 0===w||w,y=n.closeButtonText,g=void 0===y?"\u9589\u3058\u308b":y,k=n.primaryButtonText,b=void 0===k?"\u5b9f\u65bd\u3059\u308b":k,C=n.children,W=n.primaryButtonColor,A=void 0===W?"primary":W,E=n.component,H=void 0===E?"div":E,I=n.disabled,M=void 0!==I&&I,B=n.backdropClick,S=n.useEnterKey,T=void 0===S||S,z=n.handleClose,D=n.handleSubmit;return(0,x.useEffect)((function(){var n=function(n){"Enter"===n.key&&T&&D&&!M&&D()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[M,D,T]),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(l.Z,{open:t,TransitionComponent:m,fullWidth:!0,maxWidth:Z,onClose:function(n,t){(B||"backdropClick"!==t)&&z()},sx:{"& .MuiPaper-root":{opacity:.98,margin:1,width:{sm:"100%",md:"95%"}}},children:(0,p.jsxs)(c.Z,{component:H,spacing:1,children:[(0,p.jsx)(f.Z,{sx:{fontWeight:"bold",py:1},children:h}),(0,p.jsx)(s.Z,{children:(0,p.jsx)(d.Z,{sx:{py:1,maxHeight:"75vh"},children:C})}),(0,p.jsx)(u.Z,{children:(0,p.jsxs)(c.Z,{width:"100%",direction:"row",justifyContent:"space-around",alignItems:"center",mb:1,children:[(0,p.jsx)(a.Z,{loading:e,variant:"outlined",color:"inherit",size:"small",sx:{width:100},onClick:function(){return z()},children:g}),j&&(0,p.jsx)(a.Z,{loading:e,variant:"contained",color:A,disabled:M,size:"small",type:"form"===H?"submit":"button",sx:{width:100},onClick:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),t.stopPropagation(),n.t0=D,!n.t0){n.next=6;break}return n.next=6,D();case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),children:b})]})})]})})})}},81471:function(n,t,e){e.r(t),e.d(t,{default:function(){return g}});var r=e(53767),i=e(20890),o=e(16386),a=e(72791),c=e(57689),s=e(48367),d=e(24452),l=e(4942),u=e(1413),f=e(93433),h=e(29439),x=e(36151),p=e(85523),m=e(94454),v=e(12457),Z=e(39126),w=e(31490),j=e(80184);function y(n){var t=n.answers,e=n.keys,c=n.formName,s=(0,a.useState)(!1),d=(0,h.Z)(s,2),y=d[0],g=d[1],k=(0,a.useState)([]),b=(0,h.Z)(k,2),C=b[0],W=b[1];return(0,a.useEffect)((function(){y||W(e)}),[e,y]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.Z,{color:"success",variant:"contained",sx:{minWidth:120},onClick:function(){return g(!0)},startIcon:(0,j.jsx)(Z.day,{}),children:"CSV\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"}),(0,j.jsxs)(v.Z,{open:y,title:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u8a2d\u5b9a",maxWidth:"md",primaryButton:!1,handleClose:function(){g(!1)},children:[(0,j.jsx)(r.Z,{direction:"row",gap:"2px",sx:{},children:(0,j.jsxs)(r.Z,{flex:1,px:1,children:[(0,j.jsx)(i.Z,{sx:{p:1,bgcolor:"#eee",fontWeight:"bold"},children:"\u5bfe\u8c61\u306e\u9078\u629e"}),(0,j.jsxs)(r.Z,{sx:{maxHeight:"70vh",px:1},children:[(0,j.jsx)(p.Z,{control:(0,j.jsx)(m.Z,{size:"small",checked:C.length===e.length,onChange:function(n){var t=n.target.checked;W(t?e:[])}}),label:"all"}),e.map((function(n,t){return(0,j.jsx)(p.Z,{control:(0,j.jsx)(m.Z,{size:"small",checked:C.includes(n),onChange:function(t){var e=t.target.checked;W(e?[].concat((0,f.Z)(C),[n]):C.filter((function(t){return t!==n})))}}),label:"updatedAt"===n?"\u56de\u7b54\u65e5\u6642":n},n+t)}))]})]})}),(0,j.jsx)(r.Z,{direction:"row",justifyContent:"center",mt:2,children:(0,j.jsx)(w.Z,{className:"csv-download-btn",text:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",filename:c+"_"+(0,o.Z)(new Date,"yyyy-MM-dd-HH-mm-ss"),extension:".csv",separator:";",columns:C.map((function(n){return"updatedAt"===n?"\u56de\u7b54\u65e5\u6642":n})),datas:t.map((function(n){return C.reduce((function(t,e){return(0,u.Z)((0,u.Z)({},t),{},(0,l.Z)({},"updatedAt"===e?"\u56de\u7b54\u65e5\u6642":e,"updatedAt"===e?(0,o.Z)(new Date(n[e]),"yyyy\u5e74MM\u6708dd\u65e5 HH:ss"):n[e]))}),{})}))})})]})]})}function g(){var n,t,e=(0,c.UO)().id,l=(0,s.TL)(),u=(0,s.CG)((function(n){return n.UI.tokenInfo})),f=(0,s.CG)((function(n){return n.FormAnswer.status})),h=(0,s.CG)((function(n){return n.FormAnswer.list})),x=null===(n=h.find((function(n){return n.formId===parseInt("".concat(e))})))||void 0===n?void 0:n.formName,p=null===(t=h.find((function(n){return n.formId===parseInt("".concat(e))})))||void 0===t?void 0:t.answers;(0,a.useEffect)((function(){"init"===f&&l((0,d.Zr)())}),[]);var m=(0,a.useMemo)((function(){var n=[];return null===p||void 0===p||p.forEach((function(t){Object.keys(t).forEach((function(t){"id"!==t&&"createdAt"!==t&&(n.includes(t)||n.push(t))}))})),n}),[p]);return u&&p&&x?(0,j.jsxs)(r.Z,{gap:2,children:[(0,j.jsxs)(r.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:2,sx:{},children:[(0,j.jsx)(i.Z,{sx:{fontWeight:600},variant:"h5",children:"\u30d5\u30a9\u30fc\u30e0\u56de\u7b54\u4e00\u89a7"}),(0,j.jsx)(y,{answers:p,keys:m,formName:x})]}),(0,j.jsxs)(r.Z,{sx:{height:"calc(100vh - 140px)",overflowX:"auto",gap:"1px",border:"1px solid #eee"},children:[(0,j.jsx)(r.Z,{direction:"row",sx:{width:"max-content"},children:m.map((function(n,t){var e="updatedAt"===n?"\u56de\u7b54\u65e5\u6642":n;return(0,j.jsx)(i.Z,{sx:{px:1,py:1,width:18*e.length+8+"px",minWidth:200,maxWidth:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:function(n){return n.palette.primary.contrastText},bgcolor:function(n){return n.palette.primary.main},"&:not(last-child)":{borderRight:"1px solid #eee"}},children:e},n+t)}))}),(0,j.jsx)(r.Z,{children:p.map((function(n,t){return(0,j.jsx)(r.Z,{direction:"row",sx:{width:"max-content",bgcolor:t%2===0?"#fff":"#00f1"},children:m.map((function(e,r){var a="updatedAt"===e?"\u56de\u7b54\u65e5\u6642":e;return(0,j.jsx)(i.Z,{variant:"caption",sx:{wordBreak:"break-all",px:1,maxHeight:200,overflowY:"auto",width:18*a.length+8+"px",minWidth:200,maxWidth:500,"&:not(last-child)":{borderRight:"1px solid #ddd"}},children:"updatedAt"===e?(0,o.Z)(new Date(n[e]),"yyyy\u5e74MM\u6708dd\u65e5 HH:ss"):n[e]},e+(10*t+r))}))},t)}))})]})]}):null}}}]);
//# sourceMappingURL=1471.07742377.chunk.js.map