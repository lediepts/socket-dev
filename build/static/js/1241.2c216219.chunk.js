"use strict";(self.webpackChunkcaa_client=self.webpackChunkcaa_client||[]).push([[1241],{71241:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=n(1413),r=n(74165),i=n(15861),o=n(29439),s=n(44695),c=n(53329),d=n(39709),l=n(53767),u=n(20890),p=n(68096),v=n(30829),m=n(64415),f=n(23786),Z=n(27391),b=n(63466),h=n(68870),g=n(66888),y=n(51266),x=n(72791),I=n(61134),C=n(57689),j=n(48367),M=n(38100),w=n(32896),S=n(94604),k=n(81724),D=n(80184);function V(){var e,t=(0,j.TL)(),n=(0,C.s0)(),V=(0,j.CG)((function(e){return e.UI.tokenInfo})),E=(0,j.CG)((function(e){return e.Group.list})),O=(0,j.CG)((function(e){return e.Group.status})),P=(0,x.useState)(!1),G=(0,o.Z)(P,2),L=G[0],F=G[1],N=(0,j.CG)((function(e){return e.Form.list})),z=(0,j.CG)((function(e){return e.CMS.Web.list})),R=(0,j.CG)((function(e){return e.CMS.Web.status})),T=(0,x.useState)(0),q=(0,o.Z)(T,2),W=q[0],A=q[1],H=k.Ry({webId:k.Rx().required().min(1),name:k.Z_().required()}),B=(0,I.cI)({resolver:(0,s.X)(H),defaultValues:{webId:null===(e=z[0])||void 0===e?void 0:e.id,name:""}}),_=B.register,U=B.handleSubmit,X=B.setValue,J=B.getValues,K=B.setError,Q=B.formState.errors;if((0,x.useEffect)((function(){"init"===R&&t((0,M.PI)())}),[]),(0,x.useEffect)((function(){"init"===O&&t((0,w.jA)())}),[]),(0,x.useEffect)((function(){N.find((function(e){return e.id===W}))&&n("/form/".concat(W))}),[W,N,n]),!V)return null;var Y=E.find((function(e){return e.id===V.groupId}));if(!Y)return null;var $=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var a,i,o,s,c,d,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.webId,i=n.name,o=n.startDate,s=n.endDate,e.prev=1,F(!0),e.next=5,y.F.create({webId:a,name:"[".concat(Y.name,"]").concat(i),startDate:o,endDate:s});case 5:c=e.sent,d=c.id,l=c.message,u=c.error,t(S.T9.addGlobalMessage({message:l,type:u?"error":"success"})),A(d),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:return e.prev=15,F(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,13,15,18]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsxs)(l.Z,{children:[(0,D.jsx)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,D.jsx)(u.Z,{color:"primary.dark",sx:{fontWeight:600},children:"\u30d5\u30a9\u30fc\u30e0\u60c5\u5831\u5b9a\u7fa9"})}),(0,D.jsxs)(l.Z,{gap:2,my:4,maxWidth:"sm",component:"form",noValidate:!0,autoComplete:"off",onSubmit:U($),children:[(0,D.jsxs)(p.Z,{fullWidth:!0,size:"small",required:!0,children:[(0,D.jsx)(v.Z,{children:"\u4f7f\u7528\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8"}),(0,D.jsx)(m.Z,{label:"\u4f7f\u7528\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8",value:J("webId"),renderValue:function(e){if(0===e)return(0,D.jsx)(u.Z,{variant:"body2",component:"em",sx:{color:"#aaa"},children:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"});var t=z.find((function(t){return t.id===e}));return(null===t||void 0===t?void 0:t.name)||"--"},onChange:function(e){X("webId",Number(e.target.value),{shouldValidate:!0})},error:"webId"in Q,children:z.map((function(e){return(0,D.jsx)(f.Z,{value:e.id,children:e.name},e.id)}))})]}),(0,D.jsx)(Z.Z,(0,a.Z)((0,a.Z)({variant:"outlined",required:!0,margin:"dense",autoFocus:!0,fullWidth:!0,size:"small",InputProps:{startAdornment:(0,D.jsxs)(b.Z,{position:"start",children:["[",Y.name,"]"]})},label:"\u30d5\u30a9\u30fc\u30e0\u540d"},_("name")),{},{error:"name"in Q})),(0,D.jsx)(g.M,{label:"\u958b\u59cb\u65e5",inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:J("startDate")||null,onChange:function(e){if(e&&e instanceof Date&&!isNaN(e.valueOf())){X("startDate",e,{shouldValidate:!0});var t=J("endDate");t&&t<e&&X("endDate",e,{shouldValidate:!0})}},onError:function(e){K("startDate",{message:null===e||void 0===e?void 0:e.toString()})},renderInput:function(e){return(0,D.jsx)(Z.Z,(0,a.Z)((0,a.Z)({},e),{},{size:"small"}))}}),(0,D.jsx)(g.M,{label:"\u7d42\u4e86\u65e5",inputFormat:"yyyy\u5e74MM\u6708dd\u65e5",value:J("endDate")||null,onChange:function(e){e&&e instanceof Date&&!isNaN(e.valueOf())&&X("endDate",e,{shouldValidate:!0})},onError:function(e){K("endDate",{message:null===e||void 0===e?void 0:e.toString()})},minDate:J("startDate"),renderInput:function(e){return(0,D.jsx)(Z.Z,(0,a.Z)((0,a.Z)({},e),{},{size:"small"}))}}),(0,D.jsx)(h.Z,{children:(0,D.jsx)(d.Z,{variant:"outlined",disabled:Object.keys(Q).length>0,loading:L,loadingPosition:"start",startIcon:(0,D.jsx)(c.Z,{}),type:"submit",children:"\u78ba\u5b9a\u3059\u308b"})})]})]})}},53329:function(e,t,n){var a=n(64836);t.Z=void 0;var r=a(n(45649)),i=n(80184),o=(0,r.default)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=o},63466:function(e,t,n){n.d(t,{Z:function(){return C}});var a=n(4942),r=n(63366),i=n(87462),o=n(72791),s=n(28182),c=n(94419),d=n(14036),l=n(20890),u=n(93840),p=n(52930),v=n(66934),m=n(75878),f=n(21217);function Z(e){return(0,f.Z)("MuiInputAdornment",e)}var b,h=(0,m.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),g=n(31402),y=n(80184),x=["children","className","component","disablePointerEvents","disableTypography","position","variant"],I=(0,v.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,d.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&(0,a.Z)({},"&.".concat(h.positionStart,"&:not(.").concat(h.hiddenLabel,")"),{marginTop:16}),"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),C=o.forwardRef((function(e,t){var n=(0,g.Z)({props:e,name:"MuiInputAdornment"}),a=n.children,v=n.className,m=n.component,f=void 0===m?"div":m,h=n.disablePointerEvents,C=void 0!==h&&h,j=n.disableTypography,M=void 0!==j&&j,w=n.position,S=n.variant,k=(0,r.Z)(n,x),D=(0,p.Z)()||{},V=S;S&&D.variant,D&&!V&&(V=D.variant);var E=(0,i.Z)({},n,{hiddenLabel:D.hiddenLabel,size:D.size,disablePointerEvents:C,position:w,variant:V}),O=function(e){var t=e.classes,n=e.disablePointerEvents,a=e.hiddenLabel,r=e.position,i=e.size,o=e.variant,s={root:["root",n&&"disablePointerEvents",r&&"position".concat((0,d.Z)(r)),o,a&&"hiddenLabel",i&&"size".concat((0,d.Z)(i))]};return(0,c.Z)(s,Z,t)}(E);return(0,y.jsx)(u.Z.Provider,{value:null,children:(0,y.jsx)(I,(0,i.Z)({as:f,ownerState:E,className:(0,s.Z)(O.root,v),ref:t},k,{children:"string"!==typeof a||M?(0,y.jsxs)(o.Fragment,{children:["start"===w?b||(b=(0,y.jsx)("span",{className:"notranslate",children:"\u200b"})):null,a]}):(0,y.jsx)(l.Z,{color:"text.secondary",children:a})}))})}))},96014:function(e,t,n){n.d(t,{f:function(){return i}});var a=n(75878),r=n(21217);function i(e){return(0,r.Z)("MuiListItemIcon",e)}var o=(0,a.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=o},29849:function(e,t,n){n.d(t,{L:function(){return i}});var a=n(75878),r=n(21217);function i(e){return(0,r.Z)("MuiListItemText",e)}var o=(0,a.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=o},23786:function(e,t,n){n.d(t,{Z:function(){return w}});var a=n(4942),r=n(63366),i=n(87462),o=n(72791),s=n(28182),c=n(94419),d=n(12065),l=n(66934),u=n(31402),p=n(66199),v=n(95080),m=n(40162),f=n(42071),Z=n(90133),b=n(96014),h=n(29849),g=n(75878),y=n(21217);function x(e){return(0,y.Z)("MuiMenuItem",e)}var I=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),C=n(80184),j=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],M=(0,l.ZP)(v.Z,{shouldForwardProp:function(e){return(0,l.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,i.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,a.Z)(t,"&.".concat(I.selected),(0,a.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(I.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,a.Z)(t,"&.".concat(I.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,d.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,a.Z)(t,"&.".concat(I.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,a.Z)(t,"&.".concat(I.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,a.Z)(t,"& + .".concat(Z.Z.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,a.Z)(t,"& + .".concat(Z.Z.inset),{marginLeft:52}),(0,a.Z)(t,"& .".concat(h.Z.root),{marginTop:0,marginBottom:0}),(0,a.Z)(t,"& .".concat(h.Z.inset),{paddingLeft:36}),(0,a.Z)(t,"& .".concat(b.Z.root),{minWidth:36}),t),!r.dense&&(0,a.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),r.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,a.Z)({},"& .".concat(b.Z.root," svg"),{fontSize:"1.25rem"})))})),w=o.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiMenuItem"}),a=n.autoFocus,d=void 0!==a&&a,l=n.component,v=void 0===l?"li":l,Z=n.dense,b=void 0!==Z&&Z,h=n.divider,g=void 0!==h&&h,y=n.disableGutters,I=void 0!==y&&y,w=n.focusVisibleClassName,S=n.role,k=void 0===S?"menuitem":S,D=n.tabIndex,V=n.className,E=(0,r.Z)(n,j),O=o.useContext(p.Z),P=o.useMemo((function(){return{dense:b||O.dense||!1,disableGutters:I}}),[O.dense,b,I]),G=o.useRef(null);(0,m.Z)((function(){d&&G.current&&G.current.focus()}),[d]);var L,F=(0,i.Z)({},n,{dense:P.dense,divider:g,disableGutters:I}),N=function(e){var t=e.disabled,n=e.dense,a=e.divider,r=e.disableGutters,o=e.selected,s=e.classes,d={root:["root",n&&"dense",t&&"disabled",!r&&"gutters",a&&"divider",o&&"selected"]},l=(0,c.Z)(d,x,s);return(0,i.Z)({},s,l)}(n),z=(0,f.Z)(G,t);return n.disabled||(L=void 0!==D?D:-1),(0,C.jsx)(p.Z.Provider,{value:P,children:(0,C.jsx)(M,(0,i.Z)({ref:z,role:k,tabIndex:L,component:v,focusVisibleClassName:(0,s.Z)(N.focusVisible,w),className:(0,s.Z)(N.root,V)},E,{ownerState:F,classes:N}))})}))}}]);
//# sourceMappingURL=1241.2c216219.chunk.js.map